{"version":3,"sources":["app.js","templates.js","connect.js","config.js","utilities.js","modals.js","breadcrumbs.js","changeRate.js","doughnut-chart.js","hBars.js","notifications.js","protection-level.js","segments-chart.js","sidebar.js","summaryChildren.js","vBars.js","page.main.js","main/locations/page.protection.js","main/locations/view.protection.gaps.js","modals.protection.gaps.js","init.js"],"names":[],"mappings":"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","file":"emc.js","sourcesContent":["const EMC = {\r\n\t// Everything high-level will be here, right under the namespace\r\n\r\n    DOM : {\r\n        $HTML : $(document.documentElement),\r\n        $DOC  : $(document),\r\n        $WIN  : $(window),\r\n        $BODY : $(document.body)\r\n    },\r\n\r\n    // development flag,\r\n    state : {\r\n        protection : {}\r\n    },\r\n\r\n    DEV : window.location.hostname == 'localhost',\r\n\r\n    components : {},\r\n\r\n    templates : {},\r\n\r\n    tmpl : function(s){\r\n        return _.template(EMC.templates[s + '.html']);\r\n    },\r\n\r\n    viewChange : function(viewPath, viewData){\r\n        EMC.DOM.$DOC.trigger('viewChange', [viewPath, viewData]);\r\n    },\r\n\r\n\t// any global EMC-scope events binding goes here\r\n\tevents : {\r\n        bind : function(){\r\n    \t\tEMC.DOM.$WIN.on('beforeunload', EMC.events.callbacks.beforeunload);\r\n            EMC.DOM.$DOC.on('click', 'a', function(){\r\n                var url = $(this).attr('href');\r\n                Router.navigate(url);\r\n                return false;\r\n            })\r\n\r\n        },\r\n\r\n        callbacks : {\r\n            beforeunload : function(){\r\n                EMC.DOM.$BODY.addClass('loading');\r\n            }\r\n        }\r\n\t},\r\n\r\n\r\n    // on page load, before routes are triggered\r\n    preRoutes : function(){\r\n\t\t// load fonts from Google (so the CSS won't block rendering pipeline)\r\n        // requirejs(['css!http://fonts.googleapis.com/css?family=Roboto:300,400,500,700']);\r\n\r\n        EMC.utilities.defaultCheckboxes(); // Default back every checkbox and input on the page which might have changed by the user\r\n    },\r\n\r\n    // routs manager\r\n    routes : {\r\n        locations  : {},\r\n        protection : {},\r\n        modals     : {\r\n            protection : {}\r\n        },\r\n\r\n        initPage : function(){\r\n            var routes = $(document.body).data('init');\r\n            EMC.utilities.matchRoute(routes);\r\n        }\r\n    },\r\n\r\n    // puste state history manager\r\n    pushState : (function(){\r\n       var historyStatesCounter = 0;\r\n\r\n        function update(action, url, data){\r\n            action = action || 'push';\r\n            historyStatesCounter++;\r\n\r\n            window.history[action + 'State']( data, null , url );\r\n        }\r\n\r\n        window.onpopstate = function(event) {\r\n            if( !event.state ){\r\n                return;\r\n            }\r\n\r\n            console.log(event);\r\n\r\n            if( historyStatesCounter )\r\n                historyStatesCounter--;\r\n        };\r\n\r\n        return {\r\n            update : update\r\n        }\r\n    })(),\r\n\r\n    init : function(){\r\n\t\tEMC.events.bind(); // high-level events\r\n        EMC.preRoutes();\r\n        EMC.routes.initPage();\r\n    }\r\n};\r\n\r\n","EMC.templates = {\n  \"protection-gaps-table.html\": \"<table class='protectionGaps table table--fixed'>\\r\\n    <colgroup>\\r\\n        <col>\\r\\n        <col>\\r\\n        <col>\\r\\n    </colgroup>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th><div class='sortBtn' data-sort='string' data-col='0'><span>Host</span></div></th>\\r\\n            <th>\\r\\n                <div class='sortBtn' data-sort='string' data-col='1'><span>Type</span></div>\\r\\n                <label class='dropDownMenuLabel filter' data-name='type'>\\r\\n                    <input type='checkbox'>\\r\\n                    <i class='icon-filter' title='filter by'></i>\\r\\n                    <div class='dropDownMenu'>\\r\\n                        {{ typeFilter.forEach(function(typeName, i){ }}\\r\\n                            <a data-filter-by='{{= typeName }}'>{{= typeName }}</a>\\r\\n                        {{ }); }}\\r\\n                    </div>\\r\\n                </label>\\r\\n            </th>\\r\\n            <th>\\r\\n                <div class='sortBtn' data-sort='string' data-col='2'><Span>Category</Span></div>\\r\\n                <label class='dropDownMenuLabel filter' data-name='category'>\\r\\n                    <input type='checkbox'>\\r\\n                    <i class='icon-filter' title='filter by'></i>\\r\\n                    <div class='dropDownMenu'>\\r\\n                        {{ categoryFilter.forEach(function(categoryName, i){ }}\\r\\n                            <a data-filter-by='{{= categoryName }}'>{{= categoryName }}</a>\\r\\n                        {{ }); }}\\r\\n                    </div>\\r\\n                </label>\\r\\n            </th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        {{ items.forEach(function(item, i){ }}\\r\\n        <tr>\\r\\n            <td>{{= item.host }}</td>\\r\\n            <td>{{= item.type }}</td>\\r\\n            <td class='category'>{{= item.category }}</td>\\r\\n        </tr>\\r\\n        {{ }); }}\\r\\n    </tbody>\\r\\n</table>\",\n  \"protection-gaps.html\": \"<div class='protectionGaps'>\\r\\n    <header class='header--2'>\\r\\n        <h2>protection gaps categories {{= name ? \\\"- \\\" + name[0].split('-').join(' ') : '' }}</h2>\\r\\n    </header>\\r\\n    <div>\\r\\n        {{ if( isModal ){ }}\\r\\n        <component class='protectionLevel'></component>\\r\\n        {{ } }}\\r\\n        <div class='segmentsChartWrap'></div>\\r\\n    </div>\\r\\n    <header class='header--2'>\\r\\n        <h2>protection gaps details</h2>\\r\\n    </header>\\r\\n    <div class='protectionGapsTableWrap'>\\r\\n        <component class='protectionGapsTable {{= isModal ? \\\"table--fixed-header\\\" : \\\"\\\" }}'></component>\\r\\n    </div>\\r\\n</div>\",\n  \"protection.html\": \"<component class='breadcrumbs'></component>\\r\\n<header class='page__header'>\\r\\n    <button class='btn btn--1 icon-star addToFavorites' title='Save to favorites'></button>\\r\\n    <button class='btn btn--1 icon-share-alt shareBtn' title='Share report'></button>\\r\\n    <span class='lastUpdate'>Last update: 3:44PM, NOV 10, 2015</span>\\r\\n    <h1 class='page__title'>{{= name }} Summary</h1>\\r\\n</header>\\r\\n\\r\\n<div class='page__inner'>\\r\\n    <div class='page__inner__summary'>\\r\\n        <component class='protectionLevel'></component>\\r\\n        <div class='summaryMetrics'>\\r\\n            <div class='protectionHistory'>\\r\\n                <header>\\r\\n                    <div class='dateRange'>\\r\\n                        <input class='dateRangeInput' title='Change report time range' type='text' placeholder='Date of inquery' value='' readonly />\\r\\n                    </div>\\r\\n                    <h2 class='title'>Protection History</h2>\\r\\n                </header>\\r\\n                <component class='vBars'></component>\\r\\n            </div>\\r\\n            <div class='summaryMetricsGroup'>\\r\\n                <component class='groupItem1'></component>\\r\\n                <div class=\\\"changeRateGroup\\\">\\r\\n                    <component class='changeRate changeRate--jobs'></component>\\r\\n                    <component class='changeRate changeRate--client'></component>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <label for='page__inner__summary' class='resizeToggler'><span class='btn--2'></span></label>\\r\\n\\r\\n    {{ if( typeof items !== 'undefined' && items.length ){ }}\\r\\n    <section class='childrenSection'>\\r\\n        <header class='childrenSection__header'>\\r\\n            <div class='childrenViewBtns'>\\r\\n                <!--<button class='btn btn--2 icon-line-chart'></button>-->\\r\\n                <button class='btn btn--2 childrenViewBtn-boxes icon-circle active' data-view='boxes'></button>\\r\\n                <button class='btn btn--2 childrenViewBtn-list icon-list' data-view='table'></button>\\r\\n            </div>\\r\\n            <h2 class='childrenSection__header__title'>Sub Groups of <span>{{= name }}</span></h2>\\r\\n        </header>\\r\\n\\r\\n        <div class='summaryChildrenWrap'></div>\\r\\n    </section>\\r\\n    {{ } else if( protectionLevel != 100 ){ }}\\r\\n    {{= EMC.tmpl(\\\"protection-gaps\\\")({ \\\"isModal\\\":false }) }}\\r\\n    {{ } }}\\r\\n</div>\",\n  \"sidemenu.html\": \"{{ items.forEach(function(item){ }}\\r\\n    {{ if( item.items ){ }}\\r\\n    <dl>\\r\\n        <dt><a href=\\\"{{= path + item.name.split(' ').join('-').toLowerCase() }}\\\" class='{{= helpers.riskLevel(item) }}'>{{= item.name }}</a></dt>\\r\\n        {{ item.items.forEach(function(subItem){ }}\\r\\n            {{ if( subItem.items ){ }}\\r\\n            <dd>{{= template({ items:[subItem], template:template, helpers:helpers, path:path + item.name.split(' ').join('-').toLowerCase() + '/' }) }}</dd>\\r\\n            {{ } else { }}\\r\\n            <dd><a href=\\\"{{= path + item.name.split(' ').join('-').toLowerCase() + '/' + subItem.name.split(' ').join('-').toLowerCase() }}\\\" class='mainmenu__item {{= helpers.riskLevel(subItem) }}'><span>{{= subItem.name }}</span></a></dd>\\r\\n            {{ } }}\\r\\n        {{ }) }}\\r\\n    </dl>\\r\\n    {{ } else{ }}\\r\\n    <a href=\\\"{{= path + item.name.split(' ').join('-').toLowerCase() }}\\\" class='mainmenu__item {{= helpers.riskLevel(item) }}'><span>{{= item.name }}</span></a>\\r\\n    {{ } }}\\r\\n{{ }) }}\",\n  \"summary-children-box-item.html\": \"<div class=\\\"summaryChildren boxesGrid\\\">\\r\\n    {{ items.forEach(function(item, i){ }}\\r\\n    <a href='{{= item.path.toLowerCase() }}' class='colItem summaryChildren__item {{= \\\"risk-level--\\\" + item.riskLevel }}'>\\r\\n        <header>\\r\\n            <h3>{{= item.name }}</h3>\\r\\n        </header>\\r\\n        <div class='doughnutChart'>\\r\\n            <script type='js/template-doughnut'>\\r\\n                { \\\"value\\\" : {{= item.protectionLevel }}, \\\"radius\\\":[70,68] }\\r\\n            </script>\\r\\n            <div class='info'>\\r\\n                <span class='percent' data-to='{{= item.protectionLevel }}'>0</span>\\r\\n                <span class='status'>Protected</span>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"riskLevelWrap severityMark severityMark--{{= item.riskLevel}}\\\">\\r\\n            <span>{{= item.riskLevel != \\\"none\\\" ? item.riskLevel : \\\"No\\\" }} risk</span>\\r\\n        </div>\\r\\n        {{ if( item.hosts.unprotected ){ }}\\r\\n        <span class='protectedHosts'>{{= item.hosts.unprotected }} Hosts are not protected</span>\\r\\n        <button class='btn btn--3 viewGaps' data-modal='{ \\\"name\\\":\\\"protection.gaps\\\", \\\"data\\\":\\\"{{= item.path }}\\\" }'>VIEW PROTECTION GAPS</button>\\r\\n        {{ } else{ }}\\r\\n        <span class='protectedHosts'>All hosts are protected</span>\\r\\n        <span class='btn detectedGaps'>NO GAPS DETECTED</span>\\r\\n        {{ } }}\\r\\n    </a>\\r\\n    {{ }); }}\\r\\n</div>\",\n  \"summary-children-table.html\": \"<table class='summaryChildren table'>\\r\\n    <colgroup>\\r\\n        <col>\\r\\n        <col class='hBar'>\\r\\n        <col>\\r\\n        <col>\\r\\n        <col class='center'>\\r\\n        <col class='trend'>\\r\\n        <col>\\r\\n    </colgroup>\\r\\n    <thead>\\r\\n        <tr>\\r\\n            <th><div class='sortBtn' data-sort='string' data-col='0'><span>Name</span></div></th>\\r\\n            <th><div class='sortBtn' data-sort='int' data-col='1'><span>Protection Level</span></div></th>\\r\\n            <th></th>\\r\\n            <th>\\r\\n                <div class='sortBtn' data-sort='string' data-col='3'><span>Risk Level</span></div>\\r\\n                <label class='dropDownMenuLabel filter'>\\r\\n                    <input type='checkbox'>\\r\\n                    <i class='icon-filter'></i>\\r\\n                    <div class='dropDownMenu'>\\r\\n                        <a data-filter-by='none'>No Risk</a>\\r\\n                        <a data-filter-by='medium'>Medium Risk</a>\\r\\n                        <a data-filter-by='high'>High Risk</a>\\r\\n                    </div>\\r\\n                </label>\\r\\n            </th>\\r\\n            <th class='center'><div class='sortBtn' data-sort='int' data-col='4'><span>Unprotected Hosts</span></div></th>\\r\\n            <th class='center'><div class='sortBtn' data-sort='string' data-col='5'><span>Trend</span></div></th>\\r\\n            <th></th>\\r\\n        </tr>\\r\\n    </thead>\\r\\n    <tbody>\\r\\n        {{ items.forEach(function(item, i){ }}\\r\\n        <tr data-href='{{= item.path.toLowerCase() }}'>\\r\\n            <td>{{= item.name }}</td>\\r\\n            <td data-sort-value='{{= item.protectionLevel }}'><div class='hBars__bar'><div style=\\\"width:{{= item.protectionLevel }}%\\\"></div></div></td>\\r\\n            <td>{{= item.protectionLevel }}% Protected</td>\\r\\n            <td data-sort-value='{{= item.riskLevel }}' class='risk-level risk-level--{{= item.riskLevel }}'><span>{{= item.riskLevel != \\\"none\\\" ? item.riskLevel : \\\"No\\\" }} risk</span></td>\\r\\n            <td class='center'>{{=item.hosts.unprotected}}</td>\\r\\n            <td class='center' data-sort-value='{{= item.trend }}'><i class='trending icon-arrow-{{= item.trend }}'></i></td>\\r\\n            {{ if( item.hosts.unprotected ){ }}\\r\\n            <td><button class='btn btn--3 viewGaps' data-modal='{ \\\"name\\\":\\\"protection.gaps\\\", \\\"data\\\":\\\"{{= item.path }}\\\" }'>VIEW GAPS</button></td>\\r\\n            {{ } else{ }}\\r\\n            <td>NO GAPS DETECTED</td>\\r\\n            {{ } }}\\r\\n        </tr>\\r\\n        {{ }); }}\\r\\n    </tbody>\\r\\n</table>\",\n  \"components\\\\breadcrumbs-item.html\": \"<div class='breadcrumbs__item'>\\r\\n    <a href=\\\"{{= path.toLowerCase() }}\\\" class='breadcrumbs__link'>{{= name }}</a>\\r\\n    <div class='severityMark severityMark--{{= riskLevel }}'>\\r\\n        <span>{{= protectionLevel }}% Protected</span>\\r\\n    </div>\\r\\n</div>\\r\\n\",\n  \"components\\\\breadcrumbs.html\": \"<div class='breadcrumbs unselectable'>\\r\\n    <div class='breadcrumbs__item'>\\r\\n        <a class='back'><span>Back</span></a>\\r\\n    </div>\\r\\n</div>\",\n  \"components\\\\changeRate.html\": \"<div class='changeRate'>\\r\\n    <span class='title'>{{= title }}</span>\\r\\n    <span class='value percentage' data-to='{{= value }}'>0</span>\\r\\n    <i class='icon icon-arrow-{{= change }}'></i>\\r\\n</div>\",\n  \"components\\\\hBars.html\": \"<div class='hBars'>\\r\\n    {{ items.forEach(function(item){ }}\\r\\n        <div class='hBars__item'>\\r\\n            <div class='info'>\\r\\n                <span class='percentage'>{{= item.percentValue }}</span>\\r\\n                <span class='value'>{{= item.value.toLocaleString() }}</span>\\r\\n                <span class='name'>{{= item.name }}</span>\\r\\n            </div>\\r\\n            <div class='hBars__barWrap'><div class='hBars__bar' data-to=\\\"{{= item.percentValue }}%\\\"></div></div>\\r\\n        </div>\\r\\n    {{ }); }}\\r\\n</div>\",\n  \"components\\\\protection-level.html\": \"<div class='protectionLevel risk-level--{{= riskLevel }}'>\\r\\n    <header class='header--2'>\\r\\n        <h2>Protection Level</h2>\\r\\n    </header>\\r\\n    <div class='doughnutChart risk-level--{{= riskLevel }}'>\\r\\n        <script type='js/template-doughnut'>\\r\\n            { \\\"value\\\" : {{= protectionLevel }}, \\\"radius\\\":[70,68] }\\r\\n        </script>\\r\\n        <div class='info'>\\r\\n            <span class='percent' data-to='{{= protectionLevel }}'>0</span>\\r\\n            <span class='status'>Protected</span>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class='hBars__bar'><div style=\\\"width:{{= protectionLevel }}%\\\"></div></div>\\r\\n\\r\\n    <div class='riskAlertBox risk-level--{{= riskLevel }}'>\\r\\n        <i {{= riskLevel === 'none' ? 'style=\\\"display:none\\\"' : '' }} class='icon-warning'></i>\\r\\n        {{ if( hosts.unprotected ){ }}\\r\\n        <div class='texts'>\\r\\n            <span class='riskLevelTitle'>{{= riskLevel }} Risk</span>\\r\\n            <span class='description'>{{= hosts.unprotected }} hosts are not protected</span>\\r\\n        </div>\\r\\n        <button {{= typeof items == 'undefined' ? 'style=\\\"display:none\\\"' : '' }} class='btn btn--3' data-modal='{ \\\"name\\\":\\\"protection.gaps\\\", \\\"data\\\":\\\"{{= path }}\\\" }'>VIEW PROTECTION GAPS</button>\\r\\n        {{ } else{ }}\\r\\n        <div class='texts'>\\r\\n            <span class='riskLevelTitle'>{{= riskLevel != \\\"none\\\" ? riskLevel : \\\"No\\\" }} Risk</span>\\r\\n            <span class='description'>All hosts are protected</span>\\r\\n        </div>\\r\\n        <span class='btn btn--0'>NO GAPS DETECTED</span>\\r\\n        {{ } }}\\r\\n    </div>\\r\\n</div>\",\n  \"components\\\\vBars.html\": \"<div class='vBars'>\\r\\n    {{ items.forEach(function(item){ }}\\r\\n        <div class='vBars__item risk-level--{{= item.riskLevel }}'>\\r\\n            <div class='avarageLine' style=\\\"bottom:{{= avarage }}%\\\"></div>\\r\\n            <span class='label'>{{= item.label }}</span>\\r\\n            <div class='bar' data-to=\\\"{{= item.value }}%\\\" title=\\\"{{= item.value }}%\\\"></div>\\r\\n        </div>\\r\\n    {{ }); }}\\r\\n</div>\",\n  \"components\\\\plotting\\\\doughnut.html\": \"<svg viewBox=\\\"0 0 {{= (radius[0] + 10) * 2 + ' ' + (radius[0] + 10) * 2 }}\\\"  preserveAspectRatio=\\\"xMinYMin meet\\\">\\r\\n    <g>\\r\\n        <circle r=\\\"{{= radius[0] }}\\\" cx=\\\"{{= radius[0] + 10 }}\\\" cy=\\\"{{= radius[0] + 10 }}\\\" class=\\\"circle-back\\\" />\\r\\n        <circle r=\\\"{{= radius[1] }}\\\" cx=\\\"{{= radius[0] + 10 }}\\\" cy=\\\"{{= radius[0] + 10 }}\\\" class=\\\"circle-front\\\" />\\r\\n    </g>\\r\\n</svg>\"\n};","////////////////////////////////////////////////////////\r\n//////// social network login manager\r\n\r\nEMC.connect = (function(){\r\n    \"use strict\";\r\nreturn;\r\n////////////////////////////////////////////\r\n    var logout = function(e){\r\n        e.preventDefault();\r\n        // check if connected with Facebook\r\n       // ga('send', 'event', 'connection', 'signout');\r\n        dataLayer.push({'event': 'connection logout'});\r\n\r\n        if( FB.getAccessToken() )\r\n            FB.logout(logoutRedirect);\r\n\r\n        else if( gapi.auth2.getAuthInstance().isSignedIn.get() )\r\n            google.signOut();\r\n\r\n        else\r\n            logoutRedirect();\r\n\r\n        function logoutRedirect(){\r\n            window.location = \"/auth/signout\";\r\n        }\r\n    }\r\n\r\n\r\n    ////////////////////////////////\r\n    // FACEBOOK\r\n    var facebook = (function(){\r\n        // if( typeof appData == 'undefined' || !appData.fb_app_id ){\r\n        //     console.warn('no appData or missing \"fb_app_id\"');\r\n        //     return;\r\n        // }\r\n        //  Configuration\r\n        var appID = '1069832376361647',\r\n            deffered;\r\n\r\n        // Load the SDK asynchronously\r\n        (function(d, s, id) {\r\n            var js, fjs = d.getElementsByTagName(s)[0];\r\n            if (d.getElementById(id)) return;\r\n            js = d.createElement(s); js.id = id;\r\n            js.src = \"//connect.facebook.net/en_US/sdk.js\";\r\n            fjs.parentNode.insertBefore(js, fjs);\r\n        }(document, 'script', 'facebook-jssdk'));\r\n\r\n        window.fbAsyncInit = function(){\r\n            FB.init({\r\n                appId      : appID,\r\n                cookie     : true,  // enable cookies to allow the server to access // the session\r\n                xfbml      : false,  // parse social plugins on this page\r\n                version    : 'v2.4'\r\n            });\r\n            FB.getLoginStatus(FBLoginStatus);\r\n            FB.Event.subscribe('auth.authResponseChange', FBLoginStatus);\r\n        };\r\n\r\n        function FBLoginStatus(response){\r\n            if( APP.utilities.checkSignedIn() || deffered && deffered.state() != 'resolved' )\r\n                return;\r\n\r\n            // if user refused to connect\r\n            APP.DOM.$DOC.trigger('connection', ['facebook', response]);\r\n            // The response object is returned with a status field that lets the\r\n            // app know the current login status of the person.\r\n            // Full docs on the response object can be found in the documentation\r\n            // for FB.getLoginStatus().\r\n            if( response.status === 'connected' ){\r\n                // Logged into your app and Facebook.\r\n                //connected(response);\r\n                deffered = $.ajax({\r\n                    url      : '/auth/facebook',\r\n                    type     : 'POST',\r\n                    dataType : 'json',\r\n                    success  : function(res){\r\n                        APP.DOM.$DOC.trigger('login', [null, res]);\r\n                    }\r\n                })\r\n            }\r\n            else if( response.status === 'not_authorized' ){\r\n              // The person is logged into Facebook, but not your app.\r\n            }\r\n            else{\r\n              // The person is not logged into Facebook, so we're not sure if\r\n              // they are logged into this app or not.\r\n            }\r\n        };\r\n\r\n        function checkLoginState() {\r\n            FB.getLoginStatus(function(response) {\r\n                FBLoginStatus(response);\r\n            });\r\n        }\r\n\r\n        function connected(res){\r\n            console.log('FACEBOOK CONENCTED');\r\n            /*\r\n            FB.api('/me', function(response){\r\n            });\r\n            */\r\n        }\r\n\r\n        return {\r\n            login : function(){\r\n                // fix iOS Chrome\r\n                if( navigator.userAgent.match('CriOS') )\r\n                    window.open('https://www.facebook.com/dialog/oauth?client_id='+appID+'&redirect_uri='+ document.location.href +'&scope=email,public_profile,user_friends', '', null);\r\n                else\r\n                    FB.login(null, {scope: 'email,public_profile'});\r\n            },\r\n            logout : function(){\r\n                FB.logout();\r\n            }\r\n        }\r\n    })();\r\n\r\n\r\n    ////////////////////////////////\r\n    // GOOGLE\r\n\r\n    var google = (function(){\r\n        var auth2;\r\n\r\n       // window.___gcfg = {\r\n       //     parsetags: 'onload'\r\n      //  };\r\n\r\n        (function(w) {\r\n            if (!(w.gapi && w.gapi._pl)) {\r\n              var d = w.document;\r\n              var po = d.createElement('script'); po.type = 'text/javascript'; po.async = true;\r\n              po.src = 'https://apis.google.com/js/platform.js?onload=gapi_init';\r\n              var s = d.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);\r\n            }\r\n        })(window);\r\n\r\n        window.gapi_init = function(){\r\n            gapi.load('auth2', function(){\r\n                // Retrieve the singleton for the GoogleAuth library and set up the client.\r\n                auth2 = gapi.auth2.init({\r\n                    client_id    : '32120075756-ikt9bfcbm934q2tk8gu4o4etrf6690u3.apps.googleusercontent.com',\r\n                    cookiepolicy : 'single_host_origin',\r\n                    // Request scopes in addition to 'profile' and 'email'\r\n                    //scope      : 'additional_scope'\r\n                });\r\n            });\r\n        }\r\n\r\n        function signin(){\r\n            //GoogleAuth\r\n            var promise = auth2.signIn().then(function(){\r\n                console.log(arguments);\r\n            });\r\n        }\r\n\r\n        function onSignIn(googleUser){\r\n            var profile = googleUser.getBasicProfile();\r\n            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.\r\n            console.log('Name: ' + profile.getName());\r\n            console.log('Image URL: ' + profile.getImageUrl());\r\n            console.log('Email: ' + profile.getEmail());\r\n        }\r\n\r\n        function signOut(){\r\n            var auth2 = gapi.auth2.getAuthInstance();\r\n            auth2.signOut().then(function(){\r\n                console.log('User signed out.');\r\n            });\r\n        }\r\n\r\n        return {\r\n            login  : signin,\r\n            logout : signOut\r\n        }\r\n    })();\r\n\r\n\r\n    ////////////////////////////\r\n    // bind connect buttons\r\n    $('.fbConnectBtn').click(facebook.login);\r\n    $('.googleConnectBtn').click(google.login);\r\n\r\n    ////////////////////////////\r\n    // public methods\r\n    return {\r\n        logout   : logout,\r\n        facebook : facebook,\r\n        google   : google,\r\n    }\r\n})();","EMC.config = (function(){\r\n    \"use strict\";\r\n\r\n    // setup underscore template\r\n    _.templateSettings = {\r\n        interpolate : /\\{\\{\\=(.+?)\\}\\}/g,\r\n        escape      : /\\{\\{\\-(.+?)\\}\\}/g,\r\n        evaluate    : /\\{\\{(.+?)\\}\\}/g\r\n    };\r\n\r\n\r\n    var baseURL = '/api/';\r\n\r\n    // if DEV enviourment, set the default AJAX to use JSONP\r\n    if( EMC.DEV ){\r\n        baseURL = 'http://EMC/api/';\r\n\r\n        $.ajaxSetup({\r\n            dataType    : 'jsonp',\r\n            crossDomain : true\r\n        });\r\n    }\r\n\r\n    return {\r\n        baseURL : baseURL,\r\n        API : {\r\n            locations : baseURL + 'getLocations',\r\n            getData  : baseURL + 'getData',     // [userId]\r\n        },\r\n        // a list of valid routes\r\n        routes : {\r\n            //\"location\" : routeMatcher(\"location/:mainLocation/:subLocation/:extra\")\r\n        }\r\n    }\r\n})();","/////////////////////////////////////////\r\n//////// Utility functions\r\n\r\nEMC.utilities = {\r\n    isOldIE : document.all && !window.atob,\r\n\r\n    getPrefixed : function(prop){\r\n        var i, s = document.createElement('p').style, v = ['ms','O','Moz','Webkit'];\r\n        if( s[prop] == '' ) return prop;\r\n        prop = prop.charAt(0).toUpperCase() + prop.slice(1);\r\n        for( i = v.length; i--; )\r\n            if( s[v[i] + prop] == '' )\r\n                return (v[i] + prop);\r\n    },\r\n\r\n    // responsive url filtering and formating\r\n    largeImageUrlFilter : function(url){\r\n        if( window.screen.availWidth < 500 )\r\n            url = url.replace('/3_', '/2_');\r\n\r\n        return url;\r\n    },\r\n\r\n    defaultCheckboxes : function(){\r\n        var allInputs = document.querySelectorAll('input');\r\n\r\n        // loop on all checkboxes found (trick to iterate on nodeList)\r\n        [].forEach.call(allInputs, function (input) {\r\n            if( input.type == 'checkbox')\r\n                input.checked = input.defaultChecked;\r\n            else\r\n                input.value = input.defaultValue;\r\n        });\r\n    },\r\n\r\n    // log if any DOM elemtn wasn't cached\r\n    checkDOMbinding : function(DOM){\r\n        for( var i in DOM ){\r\n            if( !DOM[i] || !DOM[i].length ){\r\n                console.log( i, ' - DOM reference empty' );\r\n            }\r\n        }\r\n    },\r\n\r\n    // General window values on resize\r\n    // window : (function(){\r\n    //     var result = { scrollY : 0 },\r\n    //         timer,\r\n    //         getScrollY = function(){\r\n    //             fastdom.read(function(){\r\n    //                 result.scrollY = window.pageYOffset || document.documentElement.scrollTop;\r\n    //                 clearTimeout(timer);\r\n    //                 timer = setTimeout(scrollEnd, 200);\r\n    //                 if( timer != null )\r\n    //                     EMC.DOM.$BODY.addClass('scrolling');\r\n    //             });\r\n    //         };\r\n\r\n    //     function scrollEnd(){\r\n    //         timer = null;\r\n    //         EMC.DOM.$BODY.removeClass('scrolling');\r\n    //     }\r\n\r\n    //     EMC.DOM.$WIN.on('scroll.getScrollY', getScrollY);\r\n    //     getScrollY();\r\n\r\n    //     return result;\r\n    // })(),\r\n\r\n\r\n    ///////////////////////////////////\r\n    // parse URL\r\n    URIparse : function(url){\r\n        if( !url ){\r\n            console.warn('URL is underfined. using current one');\r\n            url = window.location.href;\r\n        }\r\n\r\n        var parser = document.createElement('a'),\r\n            searchObject = {},\r\n            queries, split, i;\r\n\r\n        // Let the browser do the work\r\n        parser.href = url;\r\n\r\n        // Convert query string to object\r\n        queries = parser.search.replace(/^\\?/, '').split('&');\r\n\r\n        for( i = 0; i < queries.length; i++ ) {\r\n            split = queries[i].split('=');\r\n            searchObject[split[0]] = split[1];\r\n        }\r\n        return {\r\n            protocol     : parser.protocol,\r\n            host         : parser.host,\r\n            hostname     : parser.hostname,\r\n            port         : parser.port,\r\n            pathname     : parser.pathname,\r\n            search       : parser.search,\r\n            searchObject : searchObject,\r\n            hash         : parser.hash\r\n        }\r\n    },\r\n\r\n\r\n    // returns true if this is the first time of a user on a page (using localstorage)\r\n    firstTimeOnPage : function(pageName){\r\n        return 'localStorage' in window && window['localStorage'] !== null && !localStorage[pageName + '-first-time'];\r\n    },\r\n\r\n\r\n    randomString : function(n){\r\n        var s = '';\r\n\r\n        while( n-- ){\r\n            s += Math.random().toString(36).substring(7);\r\n        }\r\n\r\n        return s;\r\n    },\r\n\r\n\r\n\r\n    queryParams : (function(){\r\n        var queryString = document.location.search.substr(1),\r\n            params = {}, queries, temp, i;\r\n\r\n        // Split into key/value pairs\r\n        queries = queryString.split(\"&\");\r\n\r\n        // Convert the array of strings into an object\r\n        for ( i = queries.length; i--; ) {\r\n            temp = queries[i].split('=');\r\n            params[temp[0]] = decodeURIComponent(temp[1]);\r\n        }\r\n\r\n        return params;\r\n    })(),\r\n\r\n\r\n\r\n    log : function(type, text){\r\n        text  = !text ? type : text;\r\n        text = typeof text  == 'string' ? [text] : text;\r\n        if( !type || !console[type] )\r\n            type = 'log';\r\n        console[type].apply(window, text);\r\n    },\r\n\r\n    object : {\r\n        getTopValues : function(obj, n){\r\n            // convert to an Array and sort keys by values\r\n            var props = Object.keys(obj).map(function(key) {\r\n              return { key: key, value: this[key] };\r\n            }, obj);\r\n            props.sort(function(p1, p2) { return p2.value - p1.value; });\r\n            // convert back to Object, returning N top values\r\n            return [props.slice(0, n) ,props.slice(0, n).reduce(function(obj, prop) {\r\n              obj[prop.key] = prop.value;\r\n              return obj;\r\n            }, {})]\r\n        }\r\n    },\r\n\r\n    template : {\r\n        minify : function(html){\r\n            return html.replace( new RegExp( \"\\>[\\r\\n ]+\\<\" , \"g\" ) , \"><\" );\r\n        }\r\n    },\r\n\r\n    string : {\r\n        normalizeContentEditable : function(s){\r\n            if( !s )\r\n                return '';\r\n\r\n            return s.trim()\r\n                        .replace(/<br(\\s*)\\/*>/ig, '\\n')\r\n                        .replace(/&nbsp;/ig, ' ')\r\n                        .replace(/<[p|div]\\s/ig, '\\n$0')\r\n                        .replace(/(<([^>]+)>)/ig,\"\");\r\n        }\r\n    },\r\n\r\n\r\n    // get the path of the window trimmed by \"/\", so only the part needed is extracted\r\n    getPathRoute : function(){\r\n        var path = window.location.pathname.substr(1).split('/');\r\n\r\n        return path;\r\n    },\r\n\r\n\r\n    ////////////////////////////////////////\r\n    // isElementInViewport\r\n    isElementInViewport : function(scope, el, offset){\r\n        offset = offset || 0;\r\n\r\n        var rect = el.getBoundingClientRect(),\r\n            scopeRect = scope ? scope[0].getBoundingClientRect() : { top:0, bottom:0, left:0, right:0 },\r\n            test = {\r\n                top    : rect.top - scopeRect.top - offset >= 0,\r\n                left   : rect.left - scopeRect.left >= 0,\r\n                bottom : rect.bottom + offset <= (window.innerHeight || document.documentElement.clientHeight), /*or $(window).height() */\r\n                right  : rect.right - scopeRect.left <= (window.innerWidth || document.documentElement.clientWidth) /*or $(window).width() */\r\n            }\r\n\r\n        return test.top && test.bottom && test.left && test.right;\r\n    },\r\n\r\n    isMobile : $(document.documentElement).hasClass('mobile'),\r\n    isTouch : $(document.documentElement).hasClass('touch'),\r\n\r\n    support : {\r\n        fullscreen : (function(){\r\n            var docElm = document.documentElement;\r\n            return  'requestFullscreen' in docElm ||\r\n                    'mozRequestFullScreen' in docElm ||\r\n                    'webkitRequestFullScreen' in docElm;\r\n        })()\r\n    },\r\n\r\n\r\n\r\n    toggleFullScreen : function(force){\r\n        var docElm = document.documentElement;\r\n        if( force || !document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) { // current working methods\r\n            if (docElm.requestFullscreen) {\r\n                docElm.requestFullscreen();\r\n            } else if (docElm.msRequestFullscreen) {\r\n                docElm.msRequestFullscreen();\r\n            } else if (docElm.mozRequestFullScreen) {\r\n                docElm.mozRequestFullScreen();\r\n            } else if (docElm.webkitRequestFullscreen) {\r\n                docElm.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\r\n            }\r\n            return true;\r\n        } else {\r\n            if (document.exitFullscreen) {\r\n                document.exitFullscreen();\r\n            } else if (document.msExitFullscreen) {\r\n                document.msExitFullscreen();\r\n            } else if (document.mozCancelFullScreen) {\r\n                document.mozCancelFullScreen();\r\n            } else if (document.webkitExitFullscreen) {\r\n                document.webkitExitFullscreen();\r\n            }\r\n            return false;\r\n        }\r\n    },\r\n\r\n\r\n\r\n    openPopup : function(url, title, w, h, callback){\r\n        var left      = (screen.width/2)-(w/2),\r\n            top       = (screen.height/2)-(h/2),\r\n            timer     = setInterval(checkWindowClose, 1000),\r\n            newWindow = window.open(url, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);\r\n\r\n        // Puts focus on the newWindow\r\n        if( window.focus )\r\n            newWindow.focus();\r\n\r\n        function checkWindowClose(){\r\n            console.log('waiting for popup closing: ', newWindow);\r\n            if( newWindow && newWindow.closed ){\r\n                if( typeof callback == 'function')\r\n                    callback();\r\n                clearInterval(timer);\r\n            }\r\n        }\r\n\r\n        setTimeout(function(){\r\n            clearInterval(timer);\r\n        }, 4000 * 60);\r\n\r\n        return newWindow;\r\n    },\r\n\r\n\r\n\r\n    matchRoute : function(routes){\r\n        // functions names array\r\n        var args = [].slice.call(arguments).splice(1), // get all the rest of the arguments, if exists\r\n            initDataArr,\r\n            fn, n, found;\r\n\r\n        // check if rountes exist, if so, convert them into an Array\r\n        if( routes )\r\n            initDataArr = routes.split(' ');\r\n\r\n        // execute each of the page's routes\r\n        for( n in initDataArr ){\r\n            executeFunctionByName.apply(this, [initDataArr[n], EMC.routes].concat(args) );\r\n        }\r\n\r\n        function executeFunctionByName(functionName, context /*, args */){\r\n            var args = [].slice.call(arguments).splice(2),\r\n                namespaces = functionName.split('.'),\r\n                func = namespaces.pop(),\r\n                i = 0;\r\n\r\n            // dig inside the context\r\n            for( ; i < namespaces.length; i++ ){\r\n                context = context[namespaces[i]];\r\n            }\r\n\r\n            // make sure it's a function and that it exists\r\n            if( context && typeof context[func] == 'function' ){\r\n                found = true;\r\n                return context[func].apply(EMC.routes, args);\r\n            }\r\n        }\r\n\r\n        if( !found ){\r\n            console.warn(\"route wasn't found: \", routes);\r\n        }\r\n        return found;\r\n    },\r\n\r\n\r\n\r\n\r\n    checkSignedIn : function(modal){\r\n        var signed = gs_data && gs_data.member.id;\r\n        if( !signed && modal )\r\n            EMC.components.modals.show(modal);\r\n\r\n        return !!signed;\r\n    },\r\n\r\n    bodyClass : document.body.className.split(' '),\r\n\r\n    optimizedEvent : (function() {\r\n        var callbacks = [],\r\n            changed = false,\r\n            running = false;\r\n\r\n        // fired on resize event\r\n        function doEvent() {\r\n            if (!running) {\r\n                changed = true;\r\n                loop();\r\n            }\r\n        }\r\n\r\n        // resource conscious callback loop\r\n        function loop() {\r\n            if (!changed) {\r\n                running = false;\r\n            }\r\n            else {\r\n                changed = false;\r\n                running = true;\r\n\r\n                callbacks.forEach(function(callback) {\r\n                    callback();\r\n                });\r\n\r\n                window.requestAnimationFrame(loop);\r\n            }\r\n        }\r\n\r\n        // adds callback to loop\r\n        function addCallback(callback) {\r\n            if (callback) {\r\n                callbacks.push(callback);\r\n            }\r\n        }\r\n\r\n        return {\r\n            // initalize resize event listener\r\n            init: function(event, callback) {\r\n                if (window.requestAnimationFrame) {\r\n                    window.addEventListener(event, doEvent);\r\n                    addCallback(callback);\r\n                }\r\n            },\r\n\r\n            // public method to add additional callback\r\n            add: function(callback) {\r\n                addCallback(callback);\r\n            }\r\n        }\r\n    }()),\r\n\r\n    // get data-binded elements from the template\r\n    // DOMscope     - under which node to look for data-binded elements\r\n    // bindMethods  - if there is a control function associated with a data-binded element found, run it\r\n    // DOM          - scope for the \"binded\" object to be assigned to\r\n    // scope        - where to look for a controller function for a specific data-binded element\r\n    dataBinder : function(DOMscope, bindMethods, DOM, scope){\r\n        // if the \"binded\" object doesn't exist, create one. it will store all data-binded elements found.\r\n        if( !DOM.binded )\r\n            DOM.binded = {};\r\n\r\n        DOMscope.find('[data-bind]').each(function(){\r\n            var elm  = $(this),\r\n                name = elm.data('bind') || this.className.split(' ')[0];\r\n\r\n            DOM.binded[name] = elm;\r\n        });\r\n\r\n        // Run all binded elements associated update callbacks\r\n        _.each(bindMethods, function(key){\r\n            if( typeof key == 'function' ){\r\n                key.call(scope || window);\r\n            }\r\n        });\r\n    },\r\n\r\n    Task : (function(){\r\n        function Task(settings){\r\n            if( !settings.el ) return;\r\n\r\n            this.el           = settings.el;\r\n            this.initialValue = this.el.innerHTML|0;\r\n            this.toValue      = this.el.getAttribute('data-to') || settings.toValue;\r\n            this.delta        = this.toValue - this.initialValue;\r\n            this.easing       = settings.easingFunc || function(t){ return t;  };\r\n\r\n\r\n            // Do-in settings object\r\n            var doinSettings = {\r\n                step     : this.step.bind(this),\r\n                duration : settings.duration || 1,\r\n                done     : this.done.bind(this)\r\n            };\r\n\r\n            if( settings.fps )\r\n               doinSettings.fps = settings.fps;\r\n\r\n            // create an instance of Do-in\r\n            this.doin = new Doin(doinSettings);\r\n            this.doin.run();\r\n        }\r\n\r\n        Task.prototype.nf = new Intl.NumberFormat();\r\n\r\n        // a step of the thing we want to do\r\n        Task.prototype.step = function(t, elapsed){\r\n            // easing\r\n            t = this.easing(t);\r\n\r\n            // calculate new value\r\n            var value = this.delta * t + this.initialValue;\r\n\r\n            // limit value\r\n            if( t > 0.999 )\r\n                value = this.toValue;\r\n\r\n            // print value\r\n            this.el.innerHTML = this.nf.format(value|0);\r\n        }\r\n\r\n        // on DONE\r\n        Task.prototype.done = function(){\r\n            // console.log(this.el, 'done counting!');\r\n        }\r\n\r\n        return Task;\r\n    })(),\r\n/*\r\n    photoCollectionScope : {\r\n        'profile_photo'  : 1,\r\n        'profile_cover'  : 2,\r\n        'member_gallery' : 3\r\n    },\r\n*/\r\n    ajaxSubmit : function(form){\r\n        var generalAlert = form.querySelector('.generalAlert'),\r\n            $form = $(form);\r\n\r\n        // lock form submiting until request is resolved\r\n        if( $form.data('proccesing') )\r\n            return false;\r\n\r\n        // Add loading spinner and disable the button until request was resolved\r\n        $form\r\n            .addClass('loading')\r\n            .find('button[type=submit]').prop('disabled', true);\r\n\r\n        $.ajax({\r\n            type     : \"POST\",\r\n            url      : $form[0].action,\r\n            dataType : 'json',\r\n            data     : $form.serialize() // serializes the form's elements.\r\n        })\r\n        .done(onDone)\r\n        .fail(function(){\r\n            $form.removeClass('loading');\r\n            onDone({ success:false, \"fields\":{ general:\"Something went wrong, please try again\" } });\r\n        })\r\n        .always(always);\r\n\r\n        // set form to \"processing\" state\r\n        $form.data('proccesing', true);\r\n\r\n        /////// response callbacks //////\r\n        function always(){\r\n            $form\r\n                .data('proccesing', false)\r\n                //.removeClass('loading')  // page will refresh anyway\r\n                .find('button[type=submit]').prop('disabled', false);\r\n        }\r\n\r\n        function onDone(res){\r\n            if( res.success ){\r\n                $form.removeClass('loading');\r\n            }\r\n            else\r\n                errorsHandler(res.fields);\r\n        }\r\n\r\n        function errorsHandler(fields){\r\n            var field, errorMsg;\r\n\r\n            // remove loading state on success \"false\"\r\n            $form.removeClass('loading');\r\n\r\n            for( field in fields ){\r\n                if (fields.hasOwnProperty(field)){\r\n                    errorMsg = fields[field];\r\n\r\n                    if( field == 'general' && generalAlert)\r\n                        generalAlert.innerHTML = errorMsg;\r\n\r\n                    else\r\n                        validator.mark( $( $form[0][field] ) , errorMsg );\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    getObjectByPath : function(data, pathArr, callback){\r\n        var path = '/protection/';\r\n\r\n        function recursive(data, pathArr){\r\n            var result;\r\n\r\n            for( let i=data.length; i--; ){\r\n                if( data[i].name.toLowerCase() == pathArr[0].split('-').join(' ') ){\r\n                    path += data[i].name.split(' ').join('-') + '/'\r\n                    // add current URL path to the current object\r\n                    data[i].path = path;\r\n                    // add breadcrumb item\r\n                    callback && callback(data[i]);\r\n                    result = pathArr.length > 1 ? recursive( data[i].items, pathArr.slice(1, pathArr.length) ) : data[i];\r\n\r\n                    // return current object\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n\r\n        return recursive.apply(this, arguments);\r\n    },\r\n\r\n    scriptsTemplates : function(scope){\r\n        // scan for placeholders and init them\r\n        scope.find('script').each(function(i){\r\n            try{\r\n                if( this.type == \"js/template-doughnut\" ){\r\n                    var scriptElm = $(this),\r\n                        percentElm,\r\n                        data = JSON.parse(this.innerHTML),\r\n                        doughnut = new EMC.components.Doughnut( data );\r\n\r\n                    scriptElm.replaceWith(doughnut.elm);\r\n\r\n                    setTimeout( function(){\r\n                        doughnut.setValue();\r\n\r\n                        percentElm = doughnut.elm.next('.info').find('.percent');\r\n\r\n                        if( percentElm.data('to') )\r\n                            var task = new EMC.utilities.Task({ el:percentElm[0], duration:0.8 });\r\n\r\n                    }, i*120 );\r\n                }\r\n            }\r\n            catch(err){\r\n                console.warn('Something went wrong, probably with \"Doughnut\" component or SCRIPT data is invalid JSON format');\r\n            }\r\n        });\r\n    }\r\n}\r\n","//////// COMPONENTS //////////////////////////\r\n//////// Popups manager\r\n\r\nEMC.components.modals = (function(){\r\n    \"use strict\";\r\n\r\n    var state = {\r\n        history       : [], // history of all opened modals, until modal is completly closed.\r\n        modalIsOpened : false // false OR the current modal's ID\r\n    };\r\n\r\n    var transitionEnd = 'transitionend webkitTransitionEnd oTransitionEnd otransitionend';\r\n\r\n    /////////////////////////////\r\n    // SET UP & PREPARE MODAL\r\n    var modalHTML = \"<div id='modal'> \\\r\n                        <div class='wrap'> \\\r\n                            <div class='content'> \\\r\n                                <a class='close' title='Close'>&times;</a> \\\r\n                            </div> \\\r\n                        </div> \\\r\n                    </div>\",\r\n        closeTimeout,\r\n        modal         = $(modalHTML),\r\n        modalTemplate = modal.clone(),\r\n        modals        = $('<div>'), // an empty element that will contain all the HTML from the modals ajax request\r\n        pageClass     = ''; // if exists and needed for this modal\r\n\r\n\r\n    // inject modal's container\r\n    EMC.DOM.$BODY.prepend(modal);\r\n\r\n\r\n    /////////////////////////////\r\n    // SHOW MODAL\r\n    function show(modalName, modalData){\r\n        clearTimeout(closeTimeout);\r\n\r\n        var template = EMC.templates['modals\\\\'+ modalName];\r\n        // check if required modal even exists in the templates\r\n        // if( modalName != 'lastModal' )\r\n        //     return;\r\n\r\n        console.log('>>> modal name:', modalName,', data:',modalData); // debugging\r\n        dataLayer.push({'event': 'Modal dialog', 'action':'open', 'label':modalName }); // anlytics\r\n\r\n        // Don't load the same modal again if it's already on-screen\r\n        if( !modalName || state.modalIsOpened == modalName )\r\n            return;\r\n\r\n        // is there wasn't any last modal to show from the history object\r\n        if( modalName == 'lastModal' && state.history.length < 2 ){\r\n            close();\r\n            return false;\r\n        }\r\n\r\n        // cleanup must come AFTER last DOM was saved (if that had happened)\r\n        cleanup(true);\r\n\r\n        if( modalName == 'lastModal' ){\r\n            modalName = restoreLastModal();\r\n        }\r\n\r\n        else if( state.modalIsOpened && existInHistory(modalName) ){\r\n            // TODO:\r\n            // Check if the modal which is requested is saved in the history. if so, restore it\r\n        }\r\n\r\n        else\r\n            newModal(modalName, template, modalData);\r\n\r\n       // modal[0].className = modalName + ' show ' + pageClass;\r\n        modal.removeAttr('class').addClass('show').attr('data-view', modalName);\r\n        modal.off(transitionEnd).on(transitionEnd, function(){\r\n            modal.off(transitionEnd);\r\n            modal.find('.content').css({'position':'relative', 'left':'auto'});\r\n            modal.addClass('showContent')\r\n        })\r\n        EMC.DOM.$BODY.addClass('noScrollbar');\r\n\r\n        // if the body element has changed, and the modal isn't there anymore, inject it again\r\n        if( !$('#modal').length )\r\n            EMC.DOM.$BODY.append(modal);\r\n\r\n        state.modalIsOpened = modalName;\r\n\r\n        // saves the modal (that was rendered) in the history\r\n        if( modalName != 'lastModal' && state.modalIsOpened )\r\n            saveModal(modalName, modalData);\r\n\r\n        setFormFocus();\r\n\r\n        return modal;\r\n    }\r\n\r\n    // Sets focus if has a form\r\n    function setFormFocus(){\r\n        var shouldFocus = modal.find('form:first').find('[autofocus]');\r\n        if( shouldFocus.length )\r\n            shouldFocus[0].focus();\r\n    }\r\n\r\n    // checks if a modal exists in the history cache and loads it\r\n    function existInHistory(modalName){\r\n        return state.history.some(function(item, i){\r\n            var key = _.keys(item)[0];\r\n            if( key == modalName ){\r\n                modal.find('.content').append( item[modalName].content );\r\n                if( item[modalName].outside )\r\n                    modal.find('.wrap').append( item[modalName].outside );\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    // saves the LAST modal before loading the current one.\r\n    // save histroy state ONLY for modals which trigger other modals, and might come back to the originated one\r\n    // it's very important to save the state of the modal JUST before it is changing to another one\r\n    function saveModal(modalName, modalData){\r\n         // save history of the current modal, just before changing to the next one.\r\n        var obj = {\r\n            name : modalName,\r\n            // reference the current modal's view to memory\r\n            content: modal.find('.content').find('> div'),\r\n            outside: modal.find('.outside'),\r\n            // save the current modal class name (if has one)\r\n            extraClass : pageClass,\r\n            modalData : $.extend({}, modalData)\r\n        };\r\n\r\n\r\n        state.history.push(obj);\r\n\r\n        // limit history to 2 items\r\n        // state.history.slice(-2);\r\n    }\r\n\r\n    // gets the `index` for which to store a modal from the `History` object\r\n    function restoreLastModal(){\r\n        var restored, modalName;\r\n\r\n        state.history.pop();\r\n\r\n        // load the last modal\r\n        restored = state.history.pop();\r\n\r\n        // append the DOM of the last modal\r\n        // ** MUST BE CLEANED UP PRIOR TO APPENDING IT **\r\n        modal.find('.content').append( restored.content );\r\n        pageClass = restored.extraClass;\r\n\r\n        // returns the page name of the restored modal\r\n        return restored.name;\r\n    }\r\n\r\n    function newModal(modalName, template, modalData){\r\n        var wrap      = modal.find('.wrap'),\r\n            content   = modal.find('.content'),\r\n            compiledTemplate,\r\n            renderedTemplate,\r\n            $tmpl,\r\n            outsideContent,\r\n            initData;\r\n\r\n        if( template ){\r\n            // Compile template into text\r\n            compiledTemplate = _.template( template, modalData || {} );\r\n            // render compiled template text into a DOM node\r\n            renderedTemplate = $.parseHTML(compiledTemplate)[0];\r\n            // convert it to a jQuery object\r\n            $tmpl = $(renderedTemplate);\r\n\r\n            // if there are things that needs to be outside of the WRAP container\r\n            // outsideContent = $tmpl.find('.outside');\r\n            // if( outsideContent.length )\r\n            //     wrap.append( outsideContent );\r\n\r\n            content.append( $tmpl );\r\n        }\r\n\r\n        //pageClass = $tmpl[0].className || '';\r\n\r\n\r\n        ///////////////// ROUTES ///////////////////////////////\r\n        // call the route for this modal, if exist\r\n        //initData = $tmpl.data('init');\r\n\r\n        // modal.addClass('loading');\r\n        EMC.utilities.matchRoute( 'modals.' + modalName, content, modalData );\r\n\r\n        afterRoute();\r\n    }\r\n\r\n    function afterRoute(){\r\n        // scan page for inputs for IE9\r\n        if( !$.support.placeholders )\r\n            modal.find('input[placeholder]').each(function(){\r\n                $.fn.fixPlaceholders.setOriginalType.apply(this);\r\n                $.fn.fixPlaceholders.onBlur.apply(this);\r\n            })\r\n    }\r\n\r\n    /////////////////////////////\r\n    // CLEANUP\r\n    function cleanup(soft){\r\n        pageClass = '';\r\n        // \"soft\" cleanup when changing modals from one to another\r\n        if( soft ){\r\n            modal.find('.close').siblings().detach();\r\n            modal.find('.content').siblings().detach(); // clean \"outside\" injected content\r\n        }\r\n        else{\r\n            modal.removeClass('show hide').html( modalTemplate.html() );\r\n            state.history.length = 0; // cleanup\r\n        }\r\n\r\n        // Call the last modal window (if exists) \"destroy\" method\r\n        var modalController = EMC.routes.modals[state.modalIsOpened];\r\n\r\n        // if this modal has a \"destroy\" method, to cleanup after it\r\n        if( modalController && modalController.destroy )\r\n            modalController.destroy();\r\n    }\r\n\r\n    function onKeyDown(e){\r\n        var code = e.keyCode;\r\n\r\n        // Prevent default keyboard action (like navigating inside the page)\r\n        if( code == 27 )\r\n            close();\r\n    }\r\n\r\n    /////////////////////////////\r\n    // CLOSE MODAL PROCEDURE\r\n    function close( param ){\r\n        if( state.modalIsOpened ){\r\n            var modalController = EMC.routes.modals[state.modalIsOpened];\r\n            state.modalIsOpened = false;\r\n\r\n            // if this modal has a \"destroy\" method, to cleanup after it\r\n            if( modalController && modalController.destroy )\r\n                modalController.destroy();\r\n\r\n            if( !param )\r\n                modal.addClass('hide');\r\n\r\n            // if this modal has a \"destroy\" method, to cleanup after it\r\n            if( modalController && modalController.destroy )\r\n                modalController.destroy();\r\n\r\n            EMC.DOM.$BODY.removeClass('noScrollbar');\r\n\r\n            // if 'lastModal' then do not close the mocal, but only remove elements\r\n            if( param == 'lastModal' ){\r\n                cleanup(true);\r\n            }\r\n            else if( param == 'fast' )\r\n                cleanup();\r\n            else{\r\n                // cleanup is delayed roughly until the modal was hidden\r\n                closeTimeout = setTimeout(cleanup ,250);\r\n            }\r\n\r\n            // dataLayer.push({'event': 'Modal dialog', 'action':'close', 'label':modalName }); // anlytics\r\n        }\r\n    }\r\n\r\n    // AJAX submits a form according to it's ACTION attribute\r\n    function submitForm(e){\r\n        // don't submit the form normally\r\n        e.preventDefault();\r\n\r\n        var $form = $(this),\r\n            $generalAlert = $form.find('.generalAlert');\r\n\r\n        $generalAlert.empty();\r\n\r\n        // validate before submiting to the server\r\n        // you can put your own custom validations below\r\n\r\n        // check all the rerquired fields\r\n        if( !validator.checkAll( this ) )\r\n            return false;\r\n\r\n        ajaxSubmit( $form );\r\n    }\r\n\r\n    function ajaxSubmit($form){\r\n        var $generalAlert = $form.find('.generalAlert');\r\n\r\n        // lock form submiting until request is resolved\r\n        if( $form.data('proccesing') )\r\n            return false;\r\n\r\n        // Add loading spinner and disable the button until request was resolved\r\n        $form\r\n            .addClass('loading')\r\n            .find('button[type=submit]').prop('disabled', true);\r\n\r\n        $.ajax({\r\n            type     : \"POST\",\r\n            url      : $form[0].action,\r\n            dataType : 'json',\r\n            data     : $form.serialize() // serializes the form's elements.\r\n        })\r\n        .done(onDone)\r\n        .fail(function(){\r\n            $form.removeClass('loading');\r\n            onDone({ success:false, \"fields\":{ general:\"Something went wrong, please try again\" } });\r\n        })\r\n        .always(always);\r\n\r\n        // set form to \"processing\" state\r\n        $form.data('proccesing', true);\r\n\r\n        /////// response callbacks //////\r\n        function always(){\r\n            $form\r\n                .data('proccesing', false)\r\n                //.removeClass('loading')  // page will refresh anyway\r\n                .find('button[type=submit]').prop('disabled', false);\r\n        }\r\n\r\n        function onDone(res){\r\n            if( res.success ){\r\n                $form.removeClass('loading')\r\n\r\n                var firstModal = state.history.length > 1 ? state.history[0].name: null;\r\n\r\n                // save the first modal to browser's localStorage, so it could be shown after page refresh\r\n                if(firstModal){\r\n                    localStorage['restoreModalData'] = JSON.stringify( state.history[0].modalData );\r\n                }\r\n\r\n                EMC.DOM.$DOC\r\n                    .trigger(state.modalIsOpened, [firstModal, res] )\r\n                    .trigger('modalSubmit', [state.modalIsOpened, res] );\r\n                /*\r\n                if( $form.res('refresh') )\r\n                   window.location.reload(false);\r\n                */\r\n            }\r\n            else\r\n                errorsHandler(res.fields);\r\n        }\r\n\r\n        function errorsHandler(fields){\r\n            var field, errorMsg;\r\n\r\n            // remove loading state on success \"false\"\r\n            $form.removeClass('loading');\r\n\r\n            for( field in fields ){\r\n                if (fields.hasOwnProperty(field)){\r\n                    errorMsg = fields[field];\r\n\r\n                    if( field == 'general')\r\n                        $generalAlert.text(errorMsg);\r\n\r\n                    else\r\n                        validator.mark( $( $form[0][field] ) , errorMsg );\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    /////////////////////////////\r\n    // EVENTS CALLBACKS\r\n\tfunction click_close(e){\r\n        var target = $(e.currentTarget);\r\n\r\n        if( (target.parents('.content').length || target.hasClass('content')) && !target.hasClass('close') )\r\n            return true;\r\n\r\n        close();\r\n        return false;\r\n    }\r\n\r\n\tfunction click_show(){\r\n        // the triggering link might have some data on it\r\n        var $button   = $(this),\r\n            modalName = $button.data('modal').name,\r\n            modalData = $button.data('modal').data.toLowerCase() || {};\r\n\r\n        show( modalName, modalData );\r\n    }\r\n\r\n    /////////////////////////////\r\n    // EVENTS\r\n\r\n    EMC.DOM.$DOC\r\n        .on('click.modal', 'a[data-modal], button[data-modal]', click_show)\r\n        .on('keydown.closeModal', onKeyDown);\r\n\r\n    modal\r\n        //.on('click', click_close)\r\n        .on('click', '.close', click_close)\r\n        .on('submit', 'form', submitForm);\r\n\r\n\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////\r\n// check if any modal is required to load from the from \"hash\" or \"search\" params\r\n\r\n    (function(){\r\n        var hashName     = window.location.hash.split('#')[1],\r\n            searchQuery  = window.location.search.split('?')[1],\r\n            lookForModal = hashName || searchQuery || null;\r\n\r\n        if( lookForModal ){\r\n            // direct to login modal (if needed)\r\n\r\n            if( lookForModal == 'signin' )\r\n                show('login');\r\n\r\n            else if( lookForModal == 'signup' )\r\n                show('signup');\r\n\r\n            else if( lookForModal == 'submit' && localStorage['restoreModalData'] ){\r\n                var modalData = JSON.parse( localStorage['restoreModalData'] );\r\n                delete localStorage['restoreModalData'];\r\n                show(lookForModal, modalData);\r\n            }\r\n            // if modal exists\r\n            else if( EMC.templates['modals\\\\'+ lookForModal] ){\r\n                // take the call outside of the time scope, to have enough time for \"EMC.components.modals\" to be available for the popups controllers\r\n                setTimeout(function(){\r\n                    show(lookForModal);\r\n                },0);\r\n            }\r\n            else{\r\n                return;\r\n            }\r\n\r\n            // clear hash\r\n            var yScroll = EMC.utilities.window.scrollY;\r\n\r\n            if( hashName )\r\n                window.location.hash = '';\r\n\r\n            window.scroll(0, yScroll);\r\n        }\r\n    })()\r\n\r\n\r\n    // Expose\r\n    return {\r\n        modal      : modal,\r\n        state      : state,\r\n        show       : show,\r\n        click_show : click_show,\r\n        close      : close\r\n    }\r\n})();","EMC.components.Breadcrumbs = function(){\r\n    \"use strict\";\r\n\r\n    this.template = EMC.tmpl(\"components\\\\breadcrumbs\");\r\n    this.itemTemplate = EMC.tmpl(\"components\\\\breadcrumbs-item\");\r\n\r\n    this.DOM = {\r\n        scope : $( this.template() )\r\n    }\r\n\r\n    this.DOM.back = this.DOM.scope.find('.back');\r\n\r\n    this.init();\r\n};\r\n\r\nEMC.components.Breadcrumbs.prototype = {\r\n    init : function(){\r\n        this.events.bind.call(this);\r\n    },\r\n\r\n    events : {\r\n        bind : function(){\r\n            this.DOM.scope.on('click', '.breadcrumbs__link', this.events.callbacks.itemClick.bind(this))\r\n                    .on('click', '.back', this.events.callbacks.back.bind(this))\r\n        },\r\n        callbacks : {\r\n            itemClick : function(e){\r\n               // var target = e.currentTarget;\r\n            },\r\n\r\n            back : function(e){\r\n                var href = this.DOM.scope.find('a').eq(-2).click();\r\n                this.backButtonState();\r\n               // Router.navigate('/protection/locations/united-states');\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    backButtonState : function(){\r\n        var items = this.DOM.scope.children();\r\n        this.DOM.back.toggleClass('disabled', items.length <= 2);\r\n    },\r\n\r\n\r\n    add : function(data){\r\n        var HTML = this.itemTemplate(data);\r\n        this.DOM.scope.append(HTML);\r\n        this.backButtonState();\r\n    },\r\n\r\n    remove : function(){\r\n\r\n    }\r\n}","EMC.components.changeRate = function(elm, settings){\r\n    this.DOM = {\r\n        scope : elm // the component placeholder\r\n    }\r\n\r\n    this.settings = $.extend({}, settings)\r\n\r\n    this.init();\r\n};\r\n\r\nEMC.components.changeRate.prototype = {\r\n    template : EMC.tmpl(\"components\\\\changeRate\"),\r\n\r\n    init : function(){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.addClass('loading');\r\n\r\n        this.promise && this.promise.abort(); // cancel the last request if there was any\r\n        this.promise = this.getData();\r\n\r\n        $.when( this.promise )\r\n            .done( this.render.bind(this) )\r\n            .fail( this.onGetDataFail )\r\n    },\r\n\r\n    getData : function(){\r\n        if( this.settings.mock )\r\n            return this.settings.mock;\r\n\r\n        return $.ajax({\r\n            type        : 'GET',\r\n            url         : EMC.API.baseURL + settings.endPoint,\r\n            data        : data,\r\n            dataType    : 'jsonp',\r\n            crossDomain : true\r\n        })\r\n    },\r\n\r\n    onGetDataFail : function(){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.removeClass('loading');\r\n\r\n        // should write some error message, or at least try again a few times before showing such message\r\n    },\r\n\r\n    render : function(data){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.removeClass('loading');\r\n\r\n        if( !data ) return;\r\n\r\n        var HTML = $(this.template(data));\r\n\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.replaceWith(this.DOM.scope = HTML);\r\n        else\r\n            console.warn('no DOM scope found');\r\n\r\n        this.animate();\r\n    },\r\n\r\n    // animate bars\r\n    animate : function(){\r\n        var percentElm = this.DOM.scope.find('.value');\r\n\r\n        if( percentElm.data('to') )\r\n            var task = new EMC.utilities.Task({ el:percentElm[0], duration:0.8, easingFunc:function(t){ return 1+(--t)*t*t*t*t; } });\r\n    }\r\n}","EMC.components.Doughnut = function(settings = {}){\r\n    var template = EMC.tmpl(\"components\\\\plotting\\\\doughnut\");\r\n    this.settings = $.extend({}, { radius:[70,70], value:0 }, settings);\r\n    this.compiledTemplate = template(this.settings);\r\n    this.elm = $(this.compiledTemplate);\r\n\r\n    // setTimeout( this.setValue.bind(this), 0 );\r\n};\r\n\r\nEMC.components.Doughnut.prototype = {\r\n    render : function(){\r\n    },\r\n\r\n    setValue: function (value = this.settings.value){\r\n        if( !value || value < 0 || value > 100 ){\r\n            console.warn('no value: ', value);\r\n            return false;\r\n        }\r\n\r\n        var circle    = this.elm.find('.circle-front'),\r\n            dasharray = 2 * Math.PI * this.settings.radius[1];\r\n\r\n        circle.css('stroke-dashoffset', dasharray * (1 - (value/100)) + 'px');\r\n\r\n        return this;\r\n    }\r\n};\r\n","EMC.components.hBars = function(elm){\r\n    this.DOM = {\r\n        scope : elm // the component placeholder\r\n    }\r\n\r\n    this.init();\r\n};\r\n\r\nEMC.components.hBars.prototype = {\r\n    template : EMC.tmpl(\"components\\\\hBars\"),\r\n\r\n    init : function(){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.addClass('loading');\r\n\r\n        this.promise && this.promise.abort(); // cancel the last request if there was any\r\n        this.promise = this.getData();\r\n\r\n        $.when( this.promise )\r\n            .done( this.render.bind(this) )\r\n            .fail( this.onGetDataFail )\r\n    },\r\n\r\n    getData : function(){\r\n        // mock data\r\n        return {\r\n            items : [\r\n                {\r\n                    value        : 103,\r\n                    name         : 'Unprotected Clients',\r\n                    percentValue : 8\r\n                },\r\n                {\r\n                    value        : 103,\r\n                    name         : 'Protected',\r\n                    percentValue : 50\r\n                },\r\n                {\r\n                    value        : 4322,\r\n                    name         : \"Objects Meeting RPO's\",\r\n                    percentValue : 93\r\n                }\r\n            ]\r\n        };\r\n\r\n        return $.ajax({\r\n            type        : 'GET',\r\n            url         : EMC.API.baseURL + settings.endPoint,\r\n            data        : data,\r\n            dataType    : 'jsonp',\r\n            crossDomain : true\r\n        })\r\n    },\r\n\r\n    onGetDataFail : function(){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.removeClass('loading');\r\n\r\n        // should write some error message, or at least try again a few times before showing such message\r\n    },\r\n\r\n    render : function(data){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.removeClass('loading');\r\n\r\n        if( !data ) return;\r\n\r\n        var HTML = $( this.template(data) ),\r\n            DOMscopeClass = this.DOM.scope[0].className;\r\n\r\n        // add original component placeholder classes to the template\r\n        HTML.addClass(DOMscopeClass);\r\n\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.replaceWith(this.DOM.scope = HTML);\r\n        else\r\n            console.warn('no DOM scope found');\r\n\r\n        this.animate();\r\n    },\r\n\r\n    // animate bars\r\n    animate : function(){\r\n        this.DOM.scope.find('.hBars__bar').each(function(i){\r\n            var bar = this;\r\n            setTimeout(function(){\r\n                bar.style.width = bar.dataset.to;\r\n            }, i * 150 + 100);\r\n        })\r\n    }\r\n}","EMC.components.Notifications = (function(){\r\n    \"use strict\";\r\n\r\n    var Notifications = function(elm){\r\n        this.DOM = {\r\n            container : elm\r\n        };\r\n\r\n        this.itemTemplate = _.template(EMC.templates[\"notification-item\"]);\r\n        this.maxItems     = 2;\r\n        this.addedIds     = {}; // keep scores of which items were added, so nothing which was already rendered will be rendered again\r\n        this.queue        = [];\r\n    };\r\n\r\n    Notifications.prototype = {\r\n        init : function(){\r\n            this.onData();\r\n            this.events();\r\n        },\r\n\r\n        events : function(){\r\n            this.DOM.container.on('mouseenter', this.renderInterval.stop.bind(this))\r\n                              .on('mouseleave', this.renderInterval.start.bind(this))\r\n        },\r\n\r\n        renderInterval : {\r\n            timer : null,\r\n            start : function(){\r\n                if( !this.renderInterval.timer )\r\n                    this.renderInterval.timer = setInterval(this.renderQueue.bind(this), 1000);\r\n            },\r\n            stop : function(){\r\n                clearInterval(this.renderInterval.timer);\r\n                this.renderInterval.timer = null;\r\n            }\r\n        },\r\n\r\n        getData : function(){\r\n            // return {\r\n            //     data : [\r\n            //         {\r\n            //             date  : Date.now() - 8972,\r\n            //             image : 'https://s3.amazonaws.com/uifaces/faces/twitter/vladgeorgescu/128.jpg',\r\n            //             name  : 'Yair even-or',\r\n            //             text  : 'following you'\r\n            //         },\r\n            //         {\r\n            //             date  : Date.now(),\r\n            //             image : 'https://i.ytimg.com/vi/Bu0kG1rOvqE/mqdefault.jpg',\r\n            //             name  : 'Jay martin',\r\n            //             text  : 'liked your video'\r\n            //         },\r\n            //         {\r\n            //             date  : Date.now(),\r\n            //             image : 'https://s3.amazonaws.com/uifaces/faces/twitter/kfriedson/73.jpg',\r\n            //             name  : 'Rebbeca willamns',\r\n            //             text  : 'Shared something'\r\n            //         }\r\n            //     ]\r\n            // };\r\n\r\n            return $.ajax({\r\n                type        : 'GET',\r\n                url         : 'http://api.comedy.com/dashboard/recent_notifications',\r\n                dataType    : 'jsonp',\r\n                crossDomain : true\r\n            })\r\n        },\r\n\r\n        onData : function(){\r\n            var that = this;\r\n\r\n            $.when( this.getData() )\r\n                .done(function(data){\r\n                    // add to queue only items who weren't previously rendered\r\n                    for( var i = data.data.length; i--; ){\r\n                        var id = data.data[i].date;\r\n                        if( that.addedIds[id] ){\r\n                            // console.log('dup', data.data[i].date, that.addedIds)\r\n                            data.data.splice(i, 1);\r\n                        }\r\n                        else\r\n                            that.addedIds[id] = 1;\r\n                    }\r\n\r\n                    // Merge arrays\r\n                    Array.prototype.push.apply(that.queue, data.data);\r\n                    // Fetch more data periodically\r\n                    that.timer = setTimeout(that.onData.bind(that), 5000); // fetch a batch of new data from the server\r\n\r\n                    that.doOnce();\r\n                })\r\n\r\n\r\n        },\r\n\r\n        // On first time fetching the data, render the maximum allowed number of items all at once\r\n        doOnce : function(){\r\n            var itemsToAdd = this.queue.splice(0, this.maxItems);\r\n            this.add(itemsToAdd);\r\n            this.doOnce = function(){};\r\n            // start interval cycle\r\n            this.renderInterval.start.call(this);\r\n        },\r\n\r\n        renderQueue : function(){\r\n            var itemToAdd = this.queue.pop();\r\n\r\n            if( itemToAdd ){\r\n                this.add( [itemToAdd] );\r\n                this.remove();\r\n            }\r\n        },\r\n\r\n        remove : function(){\r\n            var items = this.DOM.container.children(),\r\n                itemToRemove = items.first();\r\n\r\n            // remove only when total items exceeds \"maxItems\" allowed length\r\n            if( items.length > this.maxItems )\r\n                setTimeout(function(){\r\n                    // fade it out\r\n                    itemToRemove.addClass('hide').slideUp(150);\r\n                    // Remove from DOM\r\n                    setTimeout(function(){\r\n                        itemToRemove.remove();\r\n                    }, 400);\r\n                },100);\r\n        },\r\n\r\n        add : function(data){\r\n            var model = { items: data },\r\n                $item = $( EMC.utilities.template.minify( this.itemTemplate(model) ) );\r\n\r\n            // if there's only one item to add\r\n            if( data.length == 1 ){\r\n                // initially hide the item\r\n                $item.addClass('hide').hide();\r\n                this.DOM.container.append($item);\r\n                $item.slideDown(150).removeClass('hide');\r\n            }\r\n            // for multiple items, add as bulk HTML\r\n            else{\r\n                this.DOM.container.prepend($item);\r\n            }\r\n        }\r\n    }\r\n\r\n    return Notifications;\r\n})();","EMC.components.protectionLevel = function(elm, data){\r\n    var promise;  // the request's promise object\r\n\r\n    var settings = {\r\n        DOM      : {\r\n            elm : elm\r\n        },\r\n        template : EMC.tmpl(\"components\\\\protection-level\"),\r\n        endPoint : EMC.config.API.protection_level\r\n    };\r\n\r\n    function init(fcb){\r\n        fcb = fcb || onGetDataFail || function(){}; // fail callback\r\n\r\n        if( settings.DOM.elm )\r\n            settings.DOM.elm.addClass('loading');\r\n\r\n        promise && promise.abort(); // cancel the last request if there was any\r\n        promise = getData();\r\n\r\n        $.when( promise )\r\n            .done( render )\r\n            .fail(fcb)\r\n    };\r\n\r\n    function getData(){\r\n        // mock data\r\n        if( data )\r\n            return data;\r\n\r\n        return $.ajax({\r\n            type        : 'GET',\r\n            url         : EMC.API.baseURL + settings.endPoint,\r\n            data        : data\r\n        })\r\n    };\r\n\r\n    function onGetDataFail(){\r\n        if( settings.DOM.elm )\r\n            settings.DOM.elm.removeClass('loading');\r\n\r\n        // should write some error message, or at least try again a few times before showing such message\r\n    };\r\n\r\n    function render(data){\r\n        if( settings.DOM.elm )\r\n            settings.DOM.elm.removeClass('loading');\r\n\r\n        if( !data ) return;\r\n\r\n        // settings.DOM.elm\r\n        var HTML = settings.template(data);\r\n\r\n        if( settings.DOM.elm )\r\n            settings.DOM.elm.replaceWith(HTML);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    init();\r\n\r\n    return {\r\n        init    : init,\r\n        getData : getData\r\n    }\r\n};","EMC.components.SegmentsChart = function(elm, settings = {}){\r\n    this.settings = $.extend({}, {\r\n        colors   : ['#ffc77e', '#ffdf7e', '#51a7e4', '#8888ef', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\r\n        labels   : [],\r\n        dataset  : [],\r\n        valueset : []\r\n    }, settings);\r\n\r\n    this.currentActiveGroupIdx = null;\r\n\r\n    this.DOM = {\r\n        scope : elm,\r\n        outerCircle : $(),\r\n        circleLine  : $(),\r\n        innerCircle : $()\r\n    }\r\n\r\n    this.segmentsPositions = []; // stores initial positions of each one of the segments [[x,y],[x,y],...]\r\n\r\n    this.render();\r\n\r\n    setTimeout(this.events.bind.bind(this), 2000);\r\n\r\n    // setTimeout( this.setValue.bind(this), 0 );\r\n};\r\n\r\nEMC.components.SegmentsChart.prototype = {\r\n    events : {\r\n        bind : function(){\r\n            this.DOM.paths = this.DOM.scope.find('path');\r\n            this.DOM.texts = this.DOM.scope.find('.textWrap');\r\n            this.DOM.lines = this.DOM.scope.find('polyline');\r\n\r\n\r\n            var itemsGroup = this.DOM.paths.add(this.DOM.texts)\r\n                                           .add(this.DOM.lines);\r\n                                           // .add(this.DOM.outerCircle)\r\n                                           // .add(this.DOM.circleLine)\r\n                                           // .add(this.DOM.innerCircle);\r\n\r\n            itemsGroup.on('mouseenter', this.events.callbacks.hoverSegment.bind(this))\r\n                      .on('mouseleave', this.events.callbacks.hoverSegment.bind(this))\r\n                      .on('click', this.events.callbacks.toggleSegment.bind(this))\r\n\r\n            //this.DOM.scope.on('click', itemsGroup, this.events.callbacks.toggleSegment.bind(this))\r\n        },\r\n        callbacks : {\r\n            hoverSegment : function(e){\r\n                var idx = $(e.currentTarget).index(),\r\n                    state = e.type == 'mouseenter';\r\n\r\n                this.setGroupClass(idx, 'hover', state);\r\n\r\n                // this.DOM.paths.eq(idx)\r\n                //     .add(this.DOM.lines.eq(idx))\r\n                //     .add(this.DOM.texts.eq(idx))\r\n                //     .add(this.DOM.outerCircle.eq(idx))\r\n                //     // .add(this.DOM.circleLine.eq(idx))\r\n                //     // .add(this.DOM.innerCircle.eq(idx))\r\n                //     [e.type == 'mouseenter' ? 'svgAddClass' : 'svgRemoveClass']('hover');\r\n            },\r\n\r\n            toggleSegment : function(e){\r\n                var idx = $(e.currentTarget).index(),\r\n                    state;\r\n\r\n                if( idx == this.currentActiveGroupIdx ){\r\n                    state = false;\r\n                    // save current index\r\n                    this.currentActiveGroupIdx = null;\r\n                }\r\n                else{\r\n                    state = true;\r\n                    this.currentActiveGroupIdx = idx;\r\n                }\r\n\r\n                this.cleanActive();\r\n\r\n                if( state )\r\n                    this.activeStyles(idx);\r\n\r\n                var filterBy = this.DOM.texts.eq(idx).find('.lbl').text();\r\n\r\n                // trigger a segment click event which is being listened on other components\r\n                this.DOM.scope.trigger('segmentClick', [filterBy, state]);\r\n            }\r\n        }\r\n    },\r\n\r\n    // reset the state of the UI so nothing is selected\r\n    cleanActive : function(){\r\n        // remove all other indexes \"active\" state\r\n        this.DOM.paths.add(this.DOM.lines)\r\n                      //.add(this.DOM.texts)\r\n                      .add(this.DOM.outerCircle)\r\n                      .add(this.DOM.circleLine)\r\n                      .add(this.DOM.innerCircle)\r\n                      .svgRemoveClass('active')\r\n                      .css({ 'transform':'none' });\r\n\r\n\r\n        this.DOM.texts.each(function(){\r\n            var $this = $(this),\r\n                textsPos = $this.data('origPos');\r\n\r\n            if( textsPos )\r\n                $this.css({ 'transform':'translate(' + textsPos[0]+'px, ' + textsPos[1] + 'px)' });\r\n        });\r\n    },\r\n\r\n    // set inline styles for \"active\" segments\r\n    activeStyles : function(idx){\r\n        var itemsGroup = this.DOM.paths.eq(idx)\r\n                                       .add(this.DOM.lines.eq(idx))\r\n                                       .add(this.DOM.outerCircle.eq(idx))\r\n                                       .add(this.DOM.circleLine.eq(idx))\r\n                                       .add(this.DOM.innerCircle.eq(idx)),\r\n\r\n            textsGroup = this.DOM.texts.eq(idx),\r\n            textsGroupPosition = textsGroup[0].style.transform.replace('translate(','').replace(')', '').split(',');\r\n\r\n        this.setGroupClass(idx, 'active', true);\r\n\r\n        textsGroupPosition[0] = parseInt(textsGroupPosition[0]);\r\n        textsGroupPosition[1] = parseInt(textsGroupPosition[1]);\r\n\r\n        if( !this.segmentsPositions[idx] ){\r\n            console.warn(\"something was wrong, idx doesn't exist: \", this.segmentsPositions, idx);\r\n            return false;\r\n        }\r\n\r\n        var delta = [this.segmentsPositions[idx][0] * 0.2, this.segmentsPositions[idx][1] * 0.2];\r\n        textsGroup.data('origPos', textsGroupPosition);\r\n\r\n        textsGroup.css({ 'transform':'translate('+ (textsGroupPosition[0] + delta[0]) +'px,'+ (textsGroupPosition[1] + delta[1]) +'px)' })\r\n        itemsGroup.css({ 'transform':'translate('+ delta[0] +'px,'+ delta[1] +'px)' })\r\n    },\r\n\r\n    setGroupClass : function(idx, classname, state){\r\n        this.DOM.paths.eq(idx)\r\n                        .add(this.DOM.lines.eq(idx))\r\n                        .add(this.DOM.texts.eq(idx))\r\n                        .add(this.DOM.outerCircle.eq(idx))\r\n                        // .add(this.DOM.circleLine.eq(idx))\r\n                        // .add(this.DOM.innerCircle.eq(idx))\r\n                        [state ? 'svgAddClass' : 'svgRemoveClass'](classname);\r\n    },\r\n\r\n    render : function(){\r\n        // this.settings.values\r\n\r\n        var that     = this,\r\n            dataset  = this.settings.dataset,\r\n            valueset = this.settings.valueset,\r\n            colors   = this.settings.colors,\r\n            labels   = this.settings.labels;\r\n\r\n        //var datasum = 0;\r\n\r\n        // for(var i = 0; i < dataset.length; i++){\r\n        //     datasum += dataset[i];\r\n        // }\r\n\r\n        // if(datasum !== 100){\r\n        //   console.warn(\"the total amount is not equal to 100%\");\r\n        //   dataset = null;\r\n        // }\r\n\r\n\r\n        var width = this.DOM.scope[0].offsetWidth,\r\n            height = this.DOM.scope[0].offsetHeight,\r\n            minOfWH = Math.min(width, height) / 2,\r\n            initialAnimDelay   = 300,\r\n            arcAnimDelay       = 150,\r\n            arcAnimDur         = 2000,\r\n            secDur             = 1000,\r\n            secIndividualdelay = 150,\r\n            radius;\r\n\r\n        // calculate minimum of width and height to set chart radius\r\n        if (minOfWH > 200) {\r\n          radius = 200;\r\n        } else {\r\n          radius = minOfWH;\r\n        }\r\n\r\n        // append svg\r\n        var svg = d3.select(this.DOM.scope[0]).append('svg').attr({\r\n                                                                  //  'width'  : width,\r\n                                                                    'height' : height,\r\n                                                                    'class'  : 'segments-chart'\r\n                                                                  })\r\n                                                                  .append('g');\r\n\r\n        svg.attr({ 'transform': 'translate(' + width / 2 + ',' + height / 2 + ')' });\r\n\r\n        // for drawing slices\r\n        var arc = d3.svg.arc().outerRadius(radius * 0.6).innerRadius(radius * 0.55);\r\n\r\n        // for labels and polylines\r\n        var outerArc = d3.svg.arc().innerRadius(radius * 0.85).outerRadius(radius * 0.85);\r\n\r\n        // d3 color generator\r\n        // var c10 = d3.scale.category10();\r\n\r\n        var pie = d3.layout.pie().value(function(d){\r\n            return d;\r\n        });\r\n\r\n        var draw = function() {\r\n          svg.append(\"g\").attr(\"class\", \"slices\");\r\n          svg.append(\"g\").attr(\"class\", \"circles\");\r\n          svg.append(\"g\").attr(\"class\", \"lines\");\r\n          svg.append(\"g\").attr(\"class\", \"labels\");\r\n\r\n          // define slice\r\n          var slice = svg.select('.slices').datum(dataset)\r\n                                           .selectAll('path')\r\n                                           .data(pie);\r\n\r\n          slice\r\n            .enter().append('path')\r\n            .attr({\r\n                'fill': function(d, i) {\r\n                    // slice color\r\n                    return colors[i];\r\n                },\r\n                'd': arc\r\n            })\r\n            .attr('transform', function(d, i) {\r\n                return 'rotate(-180, 0, 0)';\r\n            })\r\n            .style('opacity', 0)\r\n            .transition()\r\n            .delay(function(d, i) {\r\n                return (i * arcAnimDelay) + initialAnimDelay;\r\n            })\r\n            .duration(arcAnimDur)\r\n            .ease('elastic')\r\n            .style('opacity', 1)\r\n            .attr({'transform': 'rotate(0,0,0)'});\r\n\r\n          slice.transition()\r\n            .delay(function(d, i) {\r\n                return arcAnimDur + (i * secIndividualdelay);\r\n            })\r\n            .duration(secDur);\r\n\r\n        function midAngle(d) {\r\n            return d.startAngle + (d.endAngle - d.startAngle) / 2;\r\n        }\r\n\r\n\r\n        var circle = svg.select(\".circles\");\r\n\r\n        var outerCircle = circle.selectAll(\".outerCircle\").data(pie(dataset));\r\n\r\n        outerCircle.enter()\r\n            .append('ellipse')\r\n            .attr({\r\n              'cx': function(d, i) {\r\n                that.DOM.outerCircle = that.DOM.outerCircle.add( $(this) );\r\n                return arc.centroid(d)[0];\r\n              },\r\n              'cy': function(d, i) {\r\n                return arc.centroid(d)[1];\r\n              },\r\n              'rx': '10',\r\n              'ry': '10'\r\n            })\r\n            .style(\"opacity\", 0)\r\n            .style({'fill': function(d, i) {\r\n                        return colors[i];\r\n                    },\r\n                    'stroke' : function(d, i) {\r\n                        return colors[i];\r\n                    }})\r\n        .transition()\r\n        .delay(function(d, i) {\r\n            return (arcAnimDur /4) + (i * secIndividualdelay);\r\n        })\r\n        .duration(secDur)\r\n        .style('opacity', 1)\r\n        .attr(\"class\", \"outerCircle\");\r\n\r\n\r\n        var circleLine = circle.selectAll(\".circleLine\").data(pie(dataset));\r\n\r\n        circleLine.enter()\r\n            .append('line')\r\n            .attr('x1', function(d, i) {\r\n                that.segmentsPositions.push(arc.centroid(d));\r\n                that.DOM.circleLine = that.DOM.circleLine.add( $(this) );\r\n              return arc.centroid(d)[0];\r\n            })\r\n            .attr('y1', function(d, i) {\r\n              return arc.centroid(d)[1];\r\n            })\r\n            .attr('x2', function(d, i) {\r\n              return outerArc.centroid(d)[0];\r\n            })\r\n            .attr('y2', function(d, i) {\r\n              return outerArc.centroid(d)[1];\r\n            })\r\n            .style(\"opacity\", 0)\r\n            .style('stroke', 'white')\r\n            .style('stroke-width', 8)\r\n            .transition()\r\n            .delay(function(d, i) {\r\n            return (arcAnimDur /4) + (i * secIndividualdelay);\r\n          })\r\n            .duration(secDur)\r\n            .style('opacity', 1)\r\n            .attr(\"class\", \"circleLine\");\r\n\r\n\r\n          var innerCircle = circle.selectAll(\".innerCircle\").data(pie(dataset));\r\n\r\n          innerCircle.enter()\r\n            .append('circle')\r\n            .style(\"opacity\", 0)\r\n            .attr('cx', function(d, i) {\r\n                that.DOM.innerCircle = that.DOM.innerCircle.add( $(this) );\r\n              return arc.centroid(d)[0];\r\n            })\r\n            .attr('cy', function(d, i) {\r\n              return arc.centroid(d)[1];\r\n            })\r\n            .attr('r', '4')\r\n            .style('fill', function(d, i) {\r\n            return colors[i];\r\n          })\r\n            .style('stroke', 'white')\r\n            .style('stroke-width', 3)\r\n            .transition()\r\n            .delay(function(d, i) {\r\n            return (arcAnimDur /4) + (i * secIndividualdelay);\r\n          })\r\n            .duration(secDur)\r\n            .style('opacity', 1)\r\n            .attr(\"class\", \"innerCircle\");\r\n\r\n\r\n            // define text\r\n\r\n          var text = svg.select(\".labels\").selectAll(\"text\").data(pie(dataset));\r\n\r\n          text.enter()\r\n            .append(\"g\")\r\n            .attr('transform', function(d) {\r\n\r\n              // calculate outerArc centroid for 'this' slice\r\n              var pos = outerArc.centroid(d);\r\n\r\n              // define left and right alignment of text labels\r\n\r\n              pos[0] = radius * (midAngle(d) < Math.PI ? 1.2 : -1.18) + \"px\";\r\n              pos[1] = arc.centroid(d)[1] > 0 ? (pos[1] - 35) + \"px\" : (pos[1] + 25) + \"px\";\r\n\r\n              this.style.transform = \"translate(\" + pos + \")\";\r\n\r\n              //return \"translate(\" + pos + \")\";\r\n            })\r\n            .attr(\"class\", \"textWrap\")\r\n            .append('text')\r\n            .attr('dy', '0.35em')\r\n            .style(\"opacity\", 0)\r\n            .style('fill', function(d, i) {\r\n              return colors[i];\r\n            })\r\n\r\n            .transition()\r\n            .delay(function(d, i) {\r\n              return (arcAnimDur /6) + (i * secIndividualdelay);\r\n            })\r\n            .duration(secDur)\r\n            .style('opacity', 1);\r\n\r\n\r\n\r\n            // define inner text\r\n\r\n            var tspan = d3.selectAll(\"text\").data(pie(dataset));\r\n\r\n            for(var i = 0; i < tspan[0].length; i++){\r\n                tspan[0][i].innerHTML += \"<tspan class='tspan val'></tspan>\\n <tspan class='tspan lbl'></tspan>\";\r\n            }\r\n\r\n            var topText = d3.selectAll(\".val\").data(pie(dataset));\r\n\r\n            topText.text(function(d, i){\r\n                return valueset[i];\r\n            })\r\n            // .attr('y', function(d) {\r\n            //      return arc.centroid(d)[1] > 0 ? -12 : 20;\r\n            //  })\r\n            .attr('x', 0)\r\n            .attr('y', 0);\r\n\r\n\r\n\r\n            var bottomText = d3.selectAll(\".lbl\").data(pie(dataset));\r\n\r\n\r\n            bottomText.text(function(d, i) {\r\n                return labels[i];\r\n            })\r\n        /*    .attr('y', function(d) {\r\n\r\n              return arc.centroid(d)[1] > 0 ? -12 : 20;\r\n            })*/\r\n          .attr('x', 0)\r\n          .attr('y', 20);\r\n\r\n\r\n          // define lines\r\n\r\n          var polyline = svg.select(\".lines\").selectAll(\"polyline\").data(pie(dataset));\r\n\r\n          polyline.enter()\r\n            .append(\"polyline\")\r\n            /*    .style(\"opacity\", 0.5)*/\r\n                  .style('stroke', function(d, i) {\r\n                  return colors[i];\r\n            })\r\n            .attr('points', function(d) {\r\n                var pos = outerArc.centroid(d);\r\n                pos[0] = radius * 0.95 * (midAngle(d) < Math.PI ? 1 : -1);\r\n                return [arc.centroid(d), arc.centroid(d), arc.centroid(d)];\r\n            })\r\n            .transition()\r\n            .duration(secDur)\r\n            .delay(function(d, i) {\r\n                return (arcAnimDur /4) + (i * secIndividualdelay);\r\n            })\r\n            .attr('points', function(d) {\r\n                var pos = outerArc.centroid(d);\r\n                pos[0] = radius * 1.5 * (midAngle(d) < Math.PI ? 1 : -1);\r\n                return [arc.centroid(d), outerArc.centroid(d), pos];\r\n            })\r\n        };\r\n\r\n        draw();\r\n    }\r\n};\r\n","// data - an Array of items, representing the DOM structure of the main menu\r\n\r\nEMC.components.sidebar = function(data){\r\n    \"use strict\";\r\n\r\n    // DOM ELEMENTS CACHING\r\n    var menuTmpl = EMC.tmpl(\"sidemenu\"),\r\n        events,\r\n        DOM = {};\r\n\r\n    DOM.scope       = $('#sidebar');\r\n    DOM.sidebarWrap = $('.sidebar__wrap');\r\n    DOM.mainmenu    = $('.mainmenu');\r\n    DOM.noResults   = DOM.mainmenu.find('.mainmenu__noReults');\r\n    DOM.search      = $('.sidebar__search__input');\r\n    DOM.clearSearch = $('.sidebar__search__clear');\r\n    DOM.datalist    = $('#sidebar__search__datalist');\r\n\r\n\r\n    var clientRect = DOM.scope[0].getBoundingClientRect();\r\n    DOM.scope.data('startPost', clientRect.top);\r\n\r\n    /////////////////////////////////////////\r\n    // Events\r\n\r\n    // events callbacks\r\n    events = {\r\n        bind : function(){\r\n            DOM.mainmenu.on('click.menu', 'dt', events.callbacks.toggleMenuItem);\r\n            \r\n            DOM.search.on('keydown', events.callbacks.searchOnKeyDown.bind(events.callbacks))\r\n                      .on('input change', events.callbacks.search);\r\n\r\n            DOM.clearSearch.on('click', events.callbacks.clearSearch);\r\n\r\n            $(window).on('scroll', events.callbacks.onScroll);\r\n\r\n            // http://stackoverflow.com/a/2196683/104380\r\n            jQuery.expr[':'].Contains = function(a, i, m) {\r\n                return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;\r\n            };\r\n        },\r\n\r\n        callbacks : {\r\n            toggleMenuItem : function(e){\r\n                if( e.target.nodeName == 'A' )\r\n                    return true;\r\n\r\n                var target = $(this);\r\n                target.parent().toggleClass('closed').find('dl').addClass('closed'); // close all inner menues, if any were open\r\n            },\r\n\r\n            search : function(e){\r\n                var value = this.value.trim(),\r\n                    foundItems;\r\n\r\n                DOM.mainmenu.toggleClass('searchMode', value.length > 2);\r\n                DOM.mainmenuItems.removeClass('show');\r\n\r\n                // do nothing if there aren't at least 3 characters, and cleanup any residual classnames\r\n                if( value.length < 3 ){\r\n                    toggleNoResults();\r\n                    return;\r\n                }\r\n\r\n                // search all 'a' elements which contains the string\r\n                foundItems = DOM.mainmenu.find(\"a:Contains(\" + value + \")\").parentsUntil(DOM.mainmenu).addClass('show');\r\n\r\n                toggleNoResults(!foundItems.length);\r\n                \r\n            },\r\n\r\n            searchOnKeyDown : function(e){\r\n                if( e.keyCode == 27 ){\r\n                    this.clearSearch();\r\n                    return false;\r\n                }\r\n            },\r\n\r\n            clearSearch : function(){\r\n                DOM.search.val('');\r\n                events.callbacks.search.apply( DOM.search[0] );\r\n            },\r\n\r\n            onScroll : function(e){\r\n                var scrollY = window.scrollY;\r\n\r\n                if( scrollY < DOM.scope.data('startPost') )\r\n                    DOM.scope.removeClass('fixed');\r\n                else if( DOM.scope[0].getBoundingClientRect().top < 0 )\r\n                   DOM.scope.addClass('fixed');\r\n            }\r\n        }\r\n    }\r\n\r\n    function toggleNoResults(state = false){\r\n        DOM.noResults.toggleClass('show', state);\r\n    }\r\n\r\n    function setActiveMenuItem(url){\r\n        // remove last \"active\" nav item\r\n        DOM.mainmenu.find('.active').removeClass('active');\r\n        // find new \"active\" nav item\r\n        var activeSideMenuItem = DOM.mainmenu.find('a[href=\"'+ url +'\"]');\r\n\r\n        // set as \"active\"\r\n        activeSideMenuItem.addClass('active');\r\n    }\r\n\r\n    var helpers = {\r\n        riskLevel : function(item){\r\n            return item[\"riskLevel\"] ? \"severityMark--\" + item[\"riskLevel\"] : \"\";\r\n        }\r\n    }\r\n\r\n    function buildDataList(){\r\n        var datalist_items = $();\r\n\r\n        function recursive(lisData){\r\n            for(var i=lisData.length; i--; ){\r\n                // make sure not to add already added items\r\n                if( datalist_items.text().indexOf(lisData[i].name) == -1 )\r\n                    // create \"option\" elements\r\n                    datalist_items = datalist_items.add( $('<option>').html(lisData[i].name) );\r\n                if( lisData[i].items )\r\n                    recursive( lisData[i].items );\r\n            }\r\n        }\r\n\r\n        recursive(data);\r\n\r\n        DOM.datalist.html( datalist_items );\r\n    }\r\n\r\n    var navigateMenuWithKeys = (function(){\r\n        var menuLinksIndexes = [],\r\n            currentLink,\r\n            curentHref,\r\n            currentLinkIndex,\r\n            nextLink = [],\r\n            menuLinks,\r\n            nextIndex,\r\n            searchMode,\r\n            isParentVisible, isFirstLink, isListClosed;\r\n\r\n        function init(){\r\n            // populate all the menu links (can only happen in the init() )\r\n            menuLinks = DOM.mainmenu.find('a');\r\n\r\n            menuLinks.each(function() {\r\n               menuLinksIndexes.push(this.getAttribute('href'));\r\n            });\r\n\r\n            // Event binding\r\n            DOM.scope.on('keydown', onKeyDown);\r\n        }\r\n\r\n        function getNextLink(inc){\r\n            var result;\r\n\r\n            while(true){\r\n                nextIndex += inc;\r\n                result = menuLinks.eq(nextIndex);\r\n\r\n                isParentVisible = result.parent().hasClass('show');\r\n                isFirstLink     = result.parent('dt').length; \r\n                isListClosed    = result.closest('dl.closed').length;\r\n\r\n                if(!result.length)\r\n                    break;\r\n                \r\n                if( searchMode && !isParentVisible && !isFirstLink )\r\n                    continue; \r\n\r\n                if( !isListClosed || isFirstLink )\r\n                    break;\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        function navigate(pressedKey){\r\n            currentLink      = menuLinks.filter('.active'),\r\n            curentHref       = currentLink.attr('href'),\r\n            currentLinkIndex = menuLinksIndexes.indexOf(curentHref),\r\n            nextLink         = [],\r\n            searchMode       = DOM.mainmenu.hasClass('searchMode'),\r\n\r\n            isParentVisible, isFirstLink, isListClosed;\r\n\r\n\r\n            if( pressedKey == 'down' ){\r\n                nextIndex = currentLinkIndex;\r\n                    \r\n                nextLink = getNextLink(1);\r\n\r\n                if( !nextLink.length )\r\n                    nextLink = menuLinks.eq(0);\r\n            }\r\n\r\n            else if( pressedKey == 'up' ){\r\n                nextIndex = currentLinkIndex;\r\n\r\n                nextLink = getNextLink(-1);\r\n\r\n                if( !nextLink.length )\r\n                    nextLink = menuLinks.eq(menuLinks.length);\r\n            }\r\n\r\n            else if( pressedKey == \"enter\")\r\n                    Router.navigate(curentHref);\r\n\r\n            else if( pressedKey == \"right\"){\r\n\r\n                var linksParent = currentLink.closest('dt');\r\n\r\n                    if(linksParent.length && linksParent.closest('dl.closed').length)\r\n                        linksParent.closest('dl.closed').removeClass(\"closed\");\r\n            }\r\n\r\n            else if( pressedKey == \"left\"){\r\n\r\n                    if(currentLink.closest('dt').length && !currentLink.closest('dt').closest('dl.closed').length)\r\n                        currentLink.closest('dt').closest('dl').addClass(\"closed\");\r\n            }\r\n                    \r\n\r\n            else return;\r\n\r\n\r\n            if( nextLink.length ){\r\n                currentLink.removeClass('active');\r\n                nextLink.addClass('active');\r\n            }\r\n        }\r\n\r\n        function onKeyDown(e){\r\n            var pressedKey = null; \r\n\r\n            switch(e.keyCode){\r\n\r\n                case 40:\r\n                pressedKey = 'down';\r\n                break;\r\n\r\n                case 38:\r\n                pressedKey = 'up';\r\n                break;\r\n\r\n                case 13:\r\n                pressedKey = 'enter';\r\n                break;\r\n\r\n                case 39:\r\n                pressedKey = 'right';\r\n                break;\r\n                \r\n                case 37:\r\n                pressedKey = 'left';\r\n                break;\r\n\r\n                default:\r\n                return;\r\n            }\r\n\r\n            navigateMenuWithKeys.navigate(pressedKey);\r\n\r\n            e.preventDefault();\r\n            return false;\r\n        }\r\n\r\n        return {\r\n            init        : init,\r\n            navigate    : navigate,\r\n            getNextLink : getNextLink\r\n        }\r\n    })();\r\n\r\n    function init(){\r\n        var HTML = menuTmpl({ items:data, template:menuTmpl, helpers:helpers, path:'/protection/' });\r\n        DOM.mainmenu.append(HTML);\r\n\r\n        DOM.mainmenuItems      = DOM.mainmenu.find('dt, dd, dl');\r\n        DOM.mainmenuItemsLinks = DOM.mainmenu.find('a');\r\n        //build(data, 0);\r\n        //console.log(nav);\r\n        events.bind();\r\n        navigateMenuWithKeys.init();\r\n        // buildDataList();\r\n    }\r\n\r\n    init();\r\n\r\n    return {\r\n        init : init,\r\n        set  : setActiveMenuItem\r\n    }\r\n};","EMC.components.summaryChildren = function(elm, settings){\r\n    var promise;  // the request's promise object\r\n\r\n    var defaults = {\r\n        DOM      : {\r\n            elm : elm\r\n        },\r\n\r\n        templates : {\r\n            boxes : EMC.tmpl(\"summary-children-box-item\"),\r\n            table : EMC.tmpl(\"summary-children-table\"),\r\n        },\r\n\r\n        view : 'boxes',\r\n\r\n        endPoint : EMC.config.API.locations\r\n    };\r\n\r\n    // update defaults with settings\r\n    settings = $.extend(defaults, settings);\r\n\r\n    // controllers for the different views of Summary Children component\r\n    var viewsController = {\r\n        boxes : {\r\n            init : function(){\r\n                settings.DOM.elm.removeAttr('style');\r\n                viewsController.boxes.events.bind();\r\n            },\r\n\r\n            events : {\r\n                bind : function(){\r\n                    settings.DOM.elm.on('click', '.colItem', viewsController.boxes.events.callbacks.colItemClick);\r\n                },\r\n\r\n                callbacks : {\r\n                    // Make sure when clicking on a button which is inside a link, do not trigger the link default behavior\r\n                    colItemClick : function(e){\r\n                        if( e.target.dataset && e.target.dataset.modal ){\r\n                           EMC.components.modals.click_show.call(e.target);\r\n                           return false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        table : {\r\n            DOM : {},\r\n\r\n            init : function(){\r\n                this.populateDOM();\r\n\r\n                this.events.bind();\r\n                console.log(settings.DOM.elm.find(\"table\"));\r\n                settings.DOM.elm.find(\"table\").height( this.DOM.summaryChildrenTable.height() );\r\n                this.DOM.summaryChildrenTable.stupidtable().on('aftertablesort', function(e, data) {\r\n                   // console.log(data);\r\n                });\r\n            },\r\n\r\n            // @filterBy - value of which to filter by\r\n            // @state    - toggle filtering (should filter or not at all)\r\n            filterTable : function(filterBy, colIndex, state){\r\n                if( !filterBy || !colIndex || !(typeof colIndex == 'number') ){\r\n                    console.warn('missing or wrong parameters');\r\n                    return false;\r\n                }\r\n\r\n                this.DOM.summaryChildrenTable.find('> tbody > tr').each(function(){\r\n                    var $tr = $(this).removeAttr('style');\r\n\r\n                    if( state && $tr.find('td').eq(colIndex).data('sortValue') != filterBy )\r\n                        $tr.hide();\r\n                })\r\n            },\r\n\r\n            populateDOM : function(){\r\n                this.DOM.summaryChildrenTable = settings.DOM.elm.find('.summaryChildren.table');\r\n\r\n                EMC.utilities.checkDOMbinding(this.DOM);\r\n            },\r\n\r\n            events : {\r\n                bind : function(){\r\n                    settings.DOM.elm.on('blur', ':checkbox', this.callbacks.onBlur );\r\n                    settings.DOM.elm.on('click', '.dropDownMenu > a', this.callbacks.dropDownMenuClick );\r\n                },\r\n\r\n                callbacks : {\r\n                    onBlur : function(){\r\n                        var that = this;\r\n                        // set \"checked\" state of the input element to \"false\" so the dropdown menu will be hidden\r\n                        setTimeout(function(){\r\n                            that.checked = false;\r\n                        }, 200);\r\n                    },\r\n\r\n                    dropDownMenuClick : function(){\r\n                        var $dropDownItem = $(this),\r\n                            idx   = $dropDownItem.closest('th').index(),\r\n                            value = $dropDownItem.data('filterBy'),\r\n                            state;\r\n\r\n                        $dropDownItem.toggleClass('active').siblings().removeClass('active');\r\n                        state = $dropDownItem.hasClass('active');\r\n\r\n                        viewsController.table.filterTable(value, idx, state);\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    var state = {\r\n        data : null\r\n    };\r\n\r\n    function init(){\r\n        settings.DOM.elm.addClass('loading');\r\n\r\n        promise && promise.abort(); // cancel the last request if there was any\r\n        promise = getData(settings.mock);\r\n\r\n        $.when( promise )\r\n            .done( render )\r\n            .fail(onGetDataFail)\r\n    };\r\n\r\n    function getData(request){\r\n        return request || $.ajax({\r\n            type : 'GET',\r\n            url  : '/get-children',\r\n            data : {'location':'united-states'}\r\n        })\r\n    };\r\n\r\n    function onGetDataFail(){\r\n        settings.DOM.elm.removeClass('loading');\r\n    };\r\n\r\n    function render(data, view){\r\n        settings.DOM.elm.removeClass('loading');\r\n\r\n        if( !data && !state.data ) return;\r\n\r\n        if( data )\r\n            state.data = data;\r\n\r\n        view = view || settings.view;\r\n\r\n        // settings.DOM.elm\r\n        var HTML = settings.templates[view]({items:state.data});\r\n\r\n        settings.DOM.elm.html(HTML);\r\n\r\n        viewsController[view].init();\r\n    };\r\n\r\n    ///////////////////////////////\r\n    init();\r\n\r\n    return {\r\n        init    : init,\r\n        getData : getData,\r\n        render  : render\r\n    }\r\n};","EMC.components.vBars = function(elm){\r\n    this.DOM = {\r\n        scope : elm // the component placeholder\r\n    }\r\n\r\n    // mock data\r\n    this.mock = {\r\n        title : 'Protection history',\r\n        avarage : 0,\r\n        items : [\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'jan'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'feb'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'mar'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'apr'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'may'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'jun'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'jul'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'aug'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'sep'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'oct'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'nov'\r\n            },\r\n            {\r\n                riskLevel : '',\r\n                value     : Math.floor(Math.random() * 100) + 1,\r\n                label     : 'dec'\r\n            }\r\n        ]\r\n    };\r\n\r\n    var that = this;\r\n\r\n    this.mock.items.forEach(function(item){\r\n        that.mock.avarage = (that.mock.avarage + item.value) / 2;\r\n\r\n        if( item.value == 100 )\r\n            item.riskLevel = 'none';\r\n        else if( item.value < 50 )\r\n            item.riskLevel = 'high';\r\n        else if(item.value >= 50)\r\n            item.riskLevel = 'medium';\r\n    });\r\n\r\n    this.init();\r\n};\r\n\r\nEMC.components.vBars.prototype = {\r\n    template : EMC.tmpl(\"components\\\\vBars\"),\r\n\r\n    init : function(){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.addClass('loading');\r\n\r\n        this.promise && this.promise.abort(); // cancel the last request if there was any\r\n        this.promise = this.getData(this.mock);\r\n\r\n        $.when( this.promise )\r\n            .done( this.render.bind(this) )\r\n            .fail( this.onGetDataFail )\r\n    },\r\n\r\n    getData : function(request){\r\n        return request || $.ajax({\r\n            type        : 'GET',\r\n            url         : EMC.API.baseURL + settings.endPoint,\r\n            data        : data,\r\n            dataType    : 'jsonp',\r\n            crossDomain : true\r\n        })\r\n    },\r\n\r\n    onGetDataFail : function(){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.removeClass('loading');\r\n\r\n        // should write some error message, or at least try again a few times before showing such message\r\n    },\r\n\r\n    render : function(data){\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.removeClass('loading');\r\n\r\n        if( !data ) return;\r\n\r\n        var HTML = $( this.template(data) );\r\n\r\n        if( this.DOM.scope )\r\n            this.DOM.scope.replaceWith(this.DOM.scope = HTML);\r\n        else\r\n            console.warn('no DOM scope found');\r\n\r\n        this.animate();\r\n    },\r\n\r\n    // animate bars\r\n    animate : function(){\r\n        this.DOM.scope.find('.bar').each(function(i){\r\n            var bar = this;\r\n            setTimeout(function(){\r\n                bar.style.height = bar.dataset.to;\r\n            }, i * 50 + 200);\r\n        })\r\n    }\r\n}","////////////////////////////////////\r\n// Main dashboard controller. A system might have several pages,\r\n// some might be single-page apps, some are regular pages.\r\n\r\nEMC.routes.main = function(){\r\n    \"use strict\";\r\n\r\n    ////////////////////////////////////////////////////////\r\n    // DON Page elements' Caching\r\n\r\n    var DOM = { }\r\n\r\n    function populateDOM(){\r\n        DOM.scope      = $('#page');\r\n        DOM.sidebar    = $('#sidebar');\r\n        DOM.mainmenu   = DOM.sidebar.find('.mainmenu');\r\n        DOM.pageheader = DOM.scope.find('.pageheader');\r\n\r\n        EMC.utilities.checkDOMbinding(DOM);\r\n    }\r\n\r\n\r\n\r\n    ////////////////////////////////////////////////////\r\n    // Page Events\r\n\r\n    var events = {\r\n        bind : function(){\r\n            $(document).on('click.route', '[data-href]', events.callbacks.changeRoute);\r\n        },\r\n\r\n        callbacks : {\r\n            changeRoute : function(e){\r\n                // make sure the modal will still work if triggered inside the \"changeRoute\" callback\r\n                if( e.target.dataset && e.target.dataset.modal ){\r\n                    EMC.components.modals.click_show.call(e.target);\r\n                    return false;\r\n                }\r\n\r\n                var url = $(this).data('href');\r\n                if( url )\r\n                    Router.navigate(url);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    function viewChange(route, routeData){\r\n        // start the Array from 'protection' item\r\n        var protectionIdx = routeData.indexOf('protection');\r\n        routeData = routeData.slice(protectionIdx, routeData.length);\r\n\r\n        // set View\r\n        DOM.scope.attr('data-view', route);\r\n        EMC.utilities.matchRoute(route, routeData);\r\n\r\n        componentsLoader.sidebar.instance.set(window.location.pathname);\r\n    }\r\n\r\n\r\n    ////////////////////////////////////////////////////\r\n    // Page routes\r\n\r\n    function routes(){\r\n        // Add routes (might use another router later, this is good for now)\r\n        Router\r\n            .add(/protection\\/locations\\/(.*)\\/(.*)/, function() {\r\n                viewChange('protection', _.values(Router.getFragment().split('/')) );\r\n            })\r\n            .add(/protection\\/locations\\/(.*)/, function() {\r\n                viewChange('protection', _.values(Router.getFragment().split('/')) );\r\n            })\r\n            .add(/protection\\/locations/, function() {\r\n                viewChange('protection', _.values(Router.getFragment().split('/')) );\r\n            })\r\n            .add(function() {\r\n                console.log('default route');\r\n                // temp default route:\r\n                Router.navigate('/protection/locations/united-states');\r\n            })\r\n            .listen();\r\n\r\n        Router.check();\r\n    }\r\n\r\n    // gets section data (protection, utilization,...)\r\n    function getData(){\r\n        // get URL fragment Array (for breadcrumbs)\r\n        var urlFragmentArr = Router.getFragment().split('/');\r\n        urlFragmentArr.shift();\r\n\r\n        // default main view\r\n        var view = urlFragmentArr[0] || 'protection';\r\n\r\n        return $.ajax({\r\n            type     : 'GET',\r\n            url      : '/mocks/' + view + '.txt',\r\n            dataType : 'json'\r\n        })\r\n    }\r\n\r\n    var componentsLoader = {\r\n        sidebar : {\r\n            instance : null,\r\n            init : function(){\r\n                componentsLoader.sidebar.instance = EMC.components.sidebar(EMC.state.protection);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    ////////////////////////////////////////////////////\r\n    // Initialize page\r\n\r\n    function init(){\r\n        $.when( getData() )\r\n            .done(function(res){\r\n                if( !res || !(res instanceof Object) || !res.length ){\r\n                    return;\r\n                }\r\n\r\n                EMC.state.protection = res;\r\n                componentsLoader.sidebar.init();\r\n\r\n                routes();\r\n            })\r\n            .fail();\r\n\r\n        populateDOM();\r\n        events.bind();\r\n    }\r\n\r\n    init();\r\n}","// **** EVERYTHING ON THIS FILE IS TEMPORARY BECAUSE THE STRUCTURE OF THE PAGES IS STILL UNKOWN SO I CAN'T STRUCTURE THE CODE YET ***\r\n\r\nEMC.routes.protection = function(viewPath){\r\n    \"use strict\";\r\n\r\n    var promise,\r\n        pageTemplate = EMC.tmpl(\"protection\"),\r\n        pageData,\r\n        templateHelpers,\r\n        componentsLoader;\r\n\r\n\r\n    var DOM = { scope : $('#page') };\r\n\r\n    // set loading state to the page\r\n    DOM.scope.addClass('loading');\r\n\r\n    ////////////////////////////////////////////////\r\n    // Get page data from server (deprecated, this data, for all protection pages is coming in one big JSON)\r\n    // function getData(){\r\n    //     return $.ajax({\r\n    //         type : 'GET',\r\n    //         url  : '/mocks/locations.' + viewPath.join('.') + '.json'\r\n    //     })\r\n    // };\r\n\r\n    // function onGetDataFail(){\r\n    //     settings.DOM.elm.removeClass('loading');\r\n    // };\r\n\r\n    function render(data){\r\n        DOM.scope.removeClass('loading');\r\n\r\n        if( !data ) return;\r\n        pageData = data;\r\n\r\n        DOM.template = $( pageTemplate(data) );\r\n        populateDOM();\r\n\r\n        // settings.DOM.elm\r\n        DOM.scope.html( DOM.template );\r\n\r\n        return data;\r\n    };\r\n\r\n    function postRender(){\r\n        for(var i in componentsLoader){\r\n            if( componentsLoader.hasOwnProperty(i) )\r\n                componentsLoader[i].init();\r\n        }\r\n\r\n\r\n        events.bind();\r\n\r\n        // must be last:\r\n        EMC.utilities.scriptsTemplates(DOM.scope);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /////////////////////////////////\r\n    // DOM caching\r\n    function populateDOM(){\r\n        DOM.template             = $(DOM.template); //jQuerify it\r\n\r\n        DOM.dateRange            = DOM.template.find('.dateRangeInput');\r\n        DOM.summaryChildrenWrap  = DOM.template.find('.summaryChildrenWrap');\r\n        DOM.protectionLevel      = DOM.template.find('.protectionLevel');\r\n        DOM.protectionHistory    = DOM.template.find('.protectionHistory');\r\n        DOM.breadcrumbs          = DOM.template.filter('.breadcrumbs');\r\n        DOM.childrenViewBtns     = DOM.template.find('.childrenViewBtns');\r\n        DOM.protectionGaps       = DOM.template.find('.protectionGaps');\r\n\r\n        EMC.utilities.checkDOMbinding(DOM);\r\n    };\r\n\r\n\r\n    var events = {\r\n        bind : function(){\r\n            DOM.childrenViewBtns.on('click', 'button', events.callbacks.childrenView);\r\n\r\n            $(window).on('scroll', events.callbacks.onScroll);\r\n        },\r\n\r\n        callbacks : {\r\n            childrenView : function(e){\r\n                var button = $(this),\r\n                    view = button.data('view');\r\n\r\n                if( button.hasClass('active') )\r\n                    return;\r\n\r\n                // mark current button as \"active\"\r\n                button.addClass('active').siblings().removeClass('active');\r\n\r\n                // change component view\r\n                componentsLoader.summaryChildren.instance.render(null, view);\r\n                EMC.utilities.scriptsTemplates(DOM.scope);\r\n            },\r\n\r\n            onScroll : function(e){\r\n                var scrollY = window.scrollY;\r\n\r\n                if( scrollY < DOM.breadcrumbs.data('startPost') )\r\n                    DOM.breadcrumbs.removeClass('fixed');\r\n                else if( DOM.breadcrumbs[0].getBoundingClientRect().top < 10 )\r\n                   DOM.breadcrumbs.addClass('fixed');\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // page components\r\n    componentsLoader = {\r\n        breadcrumbs : {\r\n            instance : null,\r\n            init : function(){\r\n                // add component to the DOM and re-save DOM pointer to the new replaced HTML element\r\n                DOM.breadcrumbs.replaceWith( DOM.breadcrumbs = componentsLoader.breadcrumbs.instance.DOM.scope );\r\n\r\n                var clientRect = DOM.breadcrumbs[0].getBoundingClientRect();\r\n\r\n                DOM.breadcrumbs.data({\r\n                                        'startPost' : DOM.breadcrumbs.offset().top - 10,\r\n                                        'height'    : clientRect.height\r\n                                    });\r\n            },\r\n            add : function(data){\r\n                componentsLoader.breadcrumbs.instance.add.call( componentsLoader.breadcrumbs.instance, data );\r\n            }\r\n        },\r\n\r\n        rangePicker : {\r\n            init : function(){\r\n                var elm = DOM.dateRange;\r\n                elm.rangePicker({ minDate:[2,2009], maxDate:[9,2015], RTL:true })\r\n                        // subscribe to the \"done\" event after user had selected a date\r\n                        .on('datePicker.done', function(e, result){\r\n                            if( result instanceof Array )\r\n                                console.log(new Date(result[0][1], result[0][0] - 1), new Date(result[1][1], result[1][0] - 1));\r\n                            else\r\n                                console.log(result);\r\n                        });\r\n\r\n                elm.rangePicker({ setDate:[[1,2015],[12,2015]], closeOnSelect:false });\r\n            }\r\n        },\r\n\r\n        protectionLevel : {\r\n            init : function(){\r\n                EMC.components.protectionLevel(DOM.protectionLevel, pageData);\r\n            }\r\n        },\r\n\r\n        summaryChildren : {\r\n            instance : null,\r\n            init : function(){\r\n                if( pageData.items ){\r\n\r\n                    pageData.items.forEach(function(item){\r\n                        item.path = pageData.path + item.name.split(' ').join('-');\r\n                    });\r\n                    var mock = _.sortBy(pageData.items, 'protectionLevel');\r\n\r\n                    componentsLoader.summaryChildren.instance = EMC.components.summaryChildren(DOM.summaryChildrenWrap, {mock:mock}, pageData);\r\n                }\r\n            }\r\n        },\r\n\r\n        protectionGaps : {\r\n            instance : null,\r\n            init : function(){\r\n                if( !pageData.items ){\r\n                    EMC.routes.protection.gaps(DOM.protectionGaps, viewPath);\r\n                }\r\n            }\r\n        },\r\n\r\n        protectionHistory : {\r\n            instance : null,\r\n            init : function(){\r\n                var elm = DOM.protectionHistory.find('.vBars');\r\n                componentsLoader.protectionHistory.instance = new EMC.components.vBars(elm);\r\n            }\r\n        },\r\n\r\n        groupItem1 : {\r\n            instance : null,\r\n            init : function(){\r\n                var elm = DOM.scope.find('.groupItem1');\r\n                componentsLoader.groupItem1.instance = new EMC.components.hBars(elm);\r\n            }\r\n        },\r\n\r\n        changeRate : {\r\n            instances : {\r\n                jobs   : null,\r\n                client : null\r\n            },\r\n\r\n            init : function(){\r\n                DOM.changeRateJobs = DOM.scope.find('.changeRate--jobs');\r\n                DOM.changeRateClient = DOM.scope.find('.changeRate--client');\r\n\r\n                var instances = componentsLoader.changeRate.instances;\r\n\r\n                var jobsMock = {\r\n                    title  : 'Jobs Success',\r\n                    value  : 95,\r\n                    change : 'up'\r\n                }\r\n\r\n                var clientMock = {\r\n                    title  : 'Client Success',\r\n                    value  : 70,\r\n                    change : 'down'\r\n                }\r\n\r\n                instances.jobs   = new EMC.components.changeRate(DOM.changeRateJobs, { mock: jobsMock });\r\n                instances.client = new EMC.components.changeRate(DOM.changeRateClient, { mock: clientMock });\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    function init(){\r\n        // promise && promise.abort(); // cancel the last request if there was any\r\n        // promise = getData();\r\n\r\n        // $.when( promise )\r\n        //     .then(render)\r\n        //     .done(postRender)\r\n        //     .fail(onGetDataFail);\r\n\r\n        // create Breadcrumbs instance\r\n        componentsLoader.breadcrumbs.instance = new EMC.components.Breadcrumbs();\r\n\r\n        // get the object needed for this page (from the main system data structure) and run a callback function\r\n        pageData = EMC.utilities.getObjectByPath( EMC.state.protection, viewPath.slice(1, viewPath.length), componentsLoader.breadcrumbs.add );\r\n\r\n        if( !pageData ){\r\n            console.log('pageData is wrong or undefined: ', pageData);\r\n            return false;\r\n        }\r\n\r\n        render(pageData);\r\n        postRender();\r\n    }\r\n\r\n    init();\r\n}","EMC.routes.protection.gaps = function(elem, viewPath){\r\n    \"use strict\";\r\n\r\n    // Define DOM object\r\n    var DOM = {\r\n        scope : elem\r\n    }\r\n\r\n    /////////////////////////////////\r\n    // DOM caching\r\n    function populateDOM(){\r\n        DOM.protectionGapsTable = DOM.scope.find('.protectionGapsTable');\r\n        DOM.segmentsChartWrap   = DOM.scope.find('.segmentsChartWrap');\r\n        DOM.protectionLevel     = DOM.scope.find('.protectionLevel');\r\n\r\n        EMC.utilities.checkDOMbinding(DOM);\r\n    };\r\n\r\n\r\n    //////////////////////////////////////\r\n    // Controller's components loader\r\n    var componentsLoader = {\r\n        protectionLevel : {\r\n            init : function(){\r\n                if( DOM.protectionLevel ){\r\n                    // get the object needed for this page (from the main system data structure)\r\n                    var pageData = EMC.utilities.getObjectByPath( EMC.state.protection, viewPath.slice(1, viewPath.length) );\r\n                    EMC.components.protectionLevel(DOM.protectionLevel, pageData);\r\n                }\r\n            }\r\n        },\r\n\r\n        segmentsChart : {\r\n            instance : null,\r\n            data : null,\r\n            init : function(res){\r\n                componentsLoader.segmentsChart.data = transformData(res);\r\n                componentsLoader.segmentsChart.instance = new EMC.components.SegmentsChart( DOM.segmentsChartWrap , componentsLoader.segmentsChart.data);\r\n            }\r\n        },\r\n\r\n        table : {\r\n            init : function(res){\r\n\r\n                var categoryFilter = transformData(res).labels,\r\n                    typeFilter     = transformData(res).types;\r\n\r\n                // render table template\r\n                var protectionGapsTable = $( EMC.tmpl(\"protection-gaps-table\")({ items:res, typeFilter:typeFilter, categoryFilter:categoryFilter }) );\r\n\r\n                // add the component's classes before replacing it\r\n                protectionGapsTable.addClass( DOM.protectionGapsTable.attr('class') ); \r\n\r\n                // replace page component with real template\r\n                DOM.protectionGapsTable.replaceWith(protectionGapsTable);\r\n                // re-save DOM pointer with new DOM element generated by the template\r\n                DOM.protectionGapsTable = protectionGapsTable;\r\n\r\n                zebra();\r\n\r\n                DOM.tableFilters = protectionGapsTable.find('.filter');\r\n\r\n                //DOM.protectionGapsTable.parent().height( DOM.protectionGapsTable.height() );\r\n                // sorting\r\n                protectionGapsTable.stupidtable().on('aftertablesort', function(e, data) {\r\n                    zebra();\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    var events = {\r\n        bind : function(){\r\n            DOM.segmentsChartWrap.on('segmentClick', this.callbacks.onSegmentClick);\r\n            DOM.protectionGapsTable.on('blur', ':checkbox', this.callbacks.onBlur )\r\n                                   .on('click', '.dropDownMenu > a', this.callbacks.dropDownMenuClick );\r\n        },\r\n\r\n        callbacks : {\r\n            onSegmentClick : function(e, value, state){\r\n                filterTable(value, 2, state);\r\n\r\n                var $dropDown = DOM.protectionGapsTable.find('th').eq(2).find('.dropDownMenu'),\r\n                    $dropDownItem = $dropDown.find('a').filter(function(){\r\n                        return $(this).data('filterBy').toLowerCase() == value.toLowerCase();\r\n                    });\r\n\r\n                resetDropDownFilters();\r\n\r\n                toggleDropDownItemActive( $dropDown, $dropDownItem.index(), state );\r\n            },\r\n\r\n            onBlur : function(){\r\n                var that = this;\r\n                // set \"checked\" state of the input element to \"false\" so the dropdown menu will be hidden\r\n                setTimeout(function(){\r\n                    that.checked = false;\r\n                }, 200);\r\n            },\r\n\r\n            dropDownMenuClick : function(){\r\n                var $dropDownItem = $(this),\r\n                    $dropDown     = $dropDownItem.closest('.dropDownMenu'),\r\n                    idx           = $dropDownItem.closest('th').index(),\r\n                    value         = $dropDownItem.data('filterBy'),\r\n                    state         = !$dropDownItem.hasClass('active'); // set state according to the item's class (state must be \"true\" to enable filtering)\r\n\r\n                 // toggle the state of the menu item via class\r\n                toggleDropDownItemActive( $dropDown , $dropDownItem.index(), state, true );\r\n\r\n                filterTable(value, idx, state);\r\n\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // get the URL path for the MOCK JSON file from an Array representing the path of the current view\r\n    // ['aaa','bbb','ccc'] --> 'bbb.ccc'\r\n    var url = viewPath.join('.');\r\n\r\n    ///////////////////////////////////\r\n    // Get server data\r\n    $.ajax({\r\n        type     : 'GET',\r\n        url      : '/mocks/' + url +'.protection-gaps.txt',\r\n        dataType : 'json'\r\n    })\r\n    .success(onSuccess)\r\n    .fail(onFail);\r\n\r\n\r\n\r\n    function onSuccess(res){\r\n        // if res is undefined or null, or not an Array, or is an array with lenth `0`, do not continue.\r\n        if( !res || !(res instanceof Array) || !res.length ){\r\n            return;\r\n        }\r\n\r\n        populateDOM();\r\n\r\n        for( let i in componentsLoader )\r\n            componentsLoader[i].init(res);\r\n\r\n        EMC.utilities.scriptsTemplates(DOM.scope);\r\n        events.bind();\r\n    }\r\n\r\n    function onFail(){\r\n        console.warn('fail');\r\n    }\r\n\r\n\r\n\r\n    // Mark every second tr element in the table which is visible\r\n    function zebra(){\r\n        DOM.protectionGapsTable.find('tr').removeClass('zebra').addBack().find('tr:visible:odd').addClass('zebra');\r\n    }\r\n\r\n\r\n    ////////////////////////////////////////\r\n    // helper function\r\n\r\n    // @filterBy - value of which to filter by\r\n    // @state    - toggle filtering (should filter or not at all)\r\n    function filterTable(filterBy, colIndex, state){\r\n        if( !filterBy || !colIndex || !(typeof colIndex == 'number') ){\r\n            console.warn('missing or wrong parameters');\r\n            return false;\r\n        }\r\n\r\n        DOM.protectionGapsTable.find('> tbody > tr').each(function(){\r\n            var $tr = $(this).removeAttr('style');\r\n\r\n            if( state && $tr.find('td').eq(colIndex).text().toLowerCase() != filterBy.toLowerCase() )\r\n                $tr.hide();\r\n        })\r\n\r\n        zebra();\r\n    };\r\n\r\n    function toggleDropDownItemActive(dropDown, itemIdx, state, setSegmentChart){\r\n        var filterName   = dropDown.parent().data('name'),\r\n            dropDownItem = dropDown.children().eq(itemIdx),\r\n            itemValue    = dropDownItem.data('filterBy').toLowerCase(),\r\n            segmentsChartItemIdx;\r\n\r\n        if( setSegmentChart ){\r\n            // case-insensetive indexOf\r\n            for(let i in componentsLoader.segmentsChart.data.labels){\r\n                if( componentsLoader.segmentsChart.data.labels[i].toLowerCase() == itemValue ){\r\n                    segmentsChartItemIdx = +i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // remove the \"active\" state of the segments chart component if any filter other than \"category\" was selected\r\n            componentsLoader.segmentsChart.instance.cleanActive();\r\n\r\n            if( filterName == 'category' && state && segmentsChartItemIdx != undefined )\r\n                componentsLoader.segmentsChart.instance.activeStyles( segmentsChartItemIdx );\r\n        }\r\n\r\n        resetDropDownFilters();\r\n\r\n        // set an \"active\" dropdown menu item\r\n        dropDownItem.toggleClass('active', state).siblings().removeClass('active');\r\n        // toggle the \"active\" class of the dropdown container itself\r\n        dropDown.parent().toggleClass('active', state);\r\n    };\r\n\r\n    // cleanup - remove all \"active\" classes from all the filters' dropdown menus\r\n    function resetDropDownFilters(){\r\n        DOM.tableFilters.each(function(){\r\n            $(this).removeClass('active').find('a').removeClass('active');\r\n        });\r\n    }\r\n\r\n    // transforms JSON data into the segment chart data\r\n    var transformData = (function(){\r\n        var transformDataRes;\r\n\r\n        return function(data){\r\n            if( transformDataRes )\r\n                return transformDataRes;\r\n\r\n            var categoryTypes = {},\r\n                dataset = [],\r\n                types = [];\r\n\r\n            //data.map( item => item.category );\r\n            data.forEach(function(item){\r\n                var itemType = item.type.toLowerCase();\r\n                if( types.indexOf(itemType) == -1 )\r\n                    types.push(itemType);\r\n                if( !categoryTypes[item.category] ){\r\n                    categoryTypes[item.category] = 1;\r\n                    dataset.push(1); // make sure each value of the dataset is the same, so their sizes will be rendered equaliy by pushing the same value (doesn't matter which value)\r\n                }\r\n                else\r\n                    categoryTypes[item.category]++;\r\n            });\r\n\r\n            transformDataRes = {\r\n                labels   : Object.keys(categoryTypes),\r\n                dataset  : dataset,\r\n                valueset : _.map(categoryTypes),\r\n                types    : types\r\n            };\r\n\r\n            return transformDataRes;\r\n        }\r\n    })();\r\n};","EMC.routes.modals.protection.gaps = function(elem, data){\r\n    var DOM = {\r\n        scope : elem\r\n    }\r\n\r\n    var template = EMC.tmpl(\"protection-gaps\"),\r\n        HTML     = template({ \"isModal\":true, \"name\": parsePath(data).slice(-1) });\r\n\r\n    /////////////////////////////////\r\n    // DOM caching\r\n    function populateDOM(){\r\n        DOM.protectionGaps = DOM.scope.find('.protectionGaps');\r\n\r\n        EMC.utilities.checkDOMbinding(DOM);\r\n    };\r\n\r\n    function gapsController(){\r\n        EMC.routes.protection.gaps(DOM.protectionGaps, parsePath(data));\r\n    }\r\n\r\n\r\n    function parsePath(data){\r\n        // remove any Array item before \"protection\"\r\n        var path = data.split('/');\r\n        // remove empty Array items that might have resulted from the \"split\" (cleanup)\r\n        path = path.filter(n => n != '');\r\n\r\n        var protectionIdx = path.indexOf('protection');\r\n        return path.slice(protectionIdx, path.length);\r\n    }\r\n\r\n    // Append the template to the scope\r\n    DOM.scope.append(HTML);\r\n    // Populate DOM pointers\r\n    populateDOM();\r\n    gapsController();\r\n\r\n}","EMC.init();\r\n"],"sourceRoot":"/source/"}