////////////////////////////////
// Page controller

#page[data-view="protection"]{
    .page__inner__summary{
        display         : flex;
        flex-direction  : row;
        flex-wrap       : nowrap;
        justify-content : space-between;
        align-content   : stretch;
        align-items     : stretch;

        @include breakpoint(ml){
            flex-direction  : column;
        }

        //////////////////////////////
        // minimized state modifications
        &.minimize{
            .protectionLevel{
                flex: 2 1;
                display: flex;
                align-content : stretch;
                align-items: center;

                header, svg, .btn, .description{ display:none; }

                .riskLevelTitle{ font-size:1.2em; }
                header{ border:0; }
                .doughnutChart{
                    .info{ position:static; padding-left:layout(side-padding); }
                    .status{ display:block; }
                    .percent{ font-size:2.8em;
                        &::after{ font-size:.6em; position:relative; vertical-align:top; }
                    }
                }

                .info{ display:inline-block; padding:1em 0; animation:repaint 1s; }

                .hBars__bar{ flex:1 0; display:inherit; border-bottom-color:C(gray5); margin:0 2%; }

                .riskAlertBox{
                    flex-direction: column;
                    align-items: center;
                    align-self: stretch;
                    justify-content: center;
                    margin: 0;
                    padding: 0 2em;
                    border: 0;
                    border-left:1px solid C(gray5);

                    i{ margin:0; }
                    .texts{ flex:0 0; }
                }
            }

            .summaryMetrics{
                .protectionHistory,
                .groupItem1 { display:none; }
                .changeRateGroup{ flex-direction:row;
                    .changeRate{ margin:0 0 0 8px; }
                }
            }
        }
    }

    /////////////////////////////
    // TopSummary section
    .protectionLevel{
        @include pageBox();
        flex: 1 1;
        margin-right: 1%;

        @include breakpoint(xl){
            .riskAlertBox{
                .texts{ font-size:.9em; }
            }
        }

        @include breakpoint(l){
            .info{ font-size:1em; }

            .riskAlertBox{
                i{ font-size:3em; margin-right:.4em; }
                .texts{ font-size:.8em; }
                .description{ display:block; margin-top:5px; line-height:1.1; }
                .btn{ font-size:.9em; }
            }
        }

        @include breakpoint(ml){
            margin-right: 0;
            margin-bottom: 1em;
        }
    }



    .summaryMetrics{
        $gap: 9px;

        @mixin boxStyle {
            border:1px solid C(offwhite);
            border-radius:layout(border-radius);
            padding: 11px 20px;
        }

        flex: 1 1;

        display         : flex;
        flex-direction  : column;
        justify-content : space-between;
        align-content   : stretch;
        align-items     : stretch;

        .protectionHistory{
            @include boxStyle;
            display: flex;
            flex-direction: column;
            flex: 3 1;
            margin-bottom: $gap;
            position: relative;

            .title{ font-weight:400; font-size:1em; padding-bottom:20px; }

            .vBars{
                flex: 1 1;
            }

            @include breakpoint(ml){
                .vBars{
                    flex: initial;
                    height:128px;
                }
            }
        }

        .summaryMetricsGroup{
            flex : 1 1;
            display: flex;
            justify-content : space-between;
            align-content   : stretch;
            align-items     : stretch;
        }

        .groupItem1{
            @include boxStyle;
            padding: 25px 20px;
            order:1;
            flex : 2 1;
            margin-left: $gap;
            //width: calc(65% - #{$gap});

            .hBars__item:nth-child(2){
                .value::after{ content:'GB'; display:inline-block; font-size:.7em; font-weight:500; margin:0 .2em; }
            }
        }

        .changeRateGroup{
            order:0;
            flex : 1 1;
            display: flex;
            flex-direction  : column;
            justify-content : space-between;
            align-content   : stretch;
            align-items     : stretch;
        }

        .changeRate{
            @include boxStyle;
            flex : 1 1;
           // width: 35%;
           // height: calc(50% - #{$gap/2});
            margin-bottom: $gap;
            &:last-child{
                margin: 0;
            }
        }
    }

    /////////////////////////////
    // resizeToggler
    .resizeToggler{ margin:2em 0; }


    /////////////////////////////
    // Children Section
    .childrenSection{
        &__header{
            margin-bottom: 1em;

            .childrenViewBtns{ float:right;
                $size: 35px;
                .btn{ margin-left:8px; padding:2px; width:$size; height:$size; font-size:26px; border-color:C(white); opacity:.5;
                    &.childrenViewBtn-boxes{ position:relative;
                        &::after{ content:$icon-circle-content; font-family:icomoon; position:absolute; opacity:.3; z-index:0; transform:translateX(-100%) rotate(95deg); }
                    }
                    &.active{ opacity:1; }
                }
            }
            &__title{ font-weight:400; font-size:2.2em;
                > span{ text-transform:capitalize; }
            }
        }
    }

    .summaryChildren.boxesGrid{
        margin-top: 0;
        @include breakpoint(l){
            .info{ font-size:.8em; }
        }
    }


    /////////////////////////////
    // protection gaps
    .protectionGaps{
        @include pageBox;
        .segmentsChartWrap{ margin:auto; height:400px; width:650px; }
    }
}